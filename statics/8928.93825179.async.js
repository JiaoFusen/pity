"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[8928],{20659:function(Dt,Be,e){var xe=e(97857),u=e.n(xe),ie=e(19478),j=e(34041),I=e(96365),G=e(49288),Ee=e(53575),s=e(99612),K=e(85893),p=j.Z.Option,R=I.Z.TextArea,E=[{label:"${response}",value:"${response}"},{label:"${status_code}",value:"${status_code}"}];Be.Z={CaseAsserts:[{name:"name",label:"\u9A8C\u8BC1\u70B9",required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",type:"input",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",component:null,span:24},{name:"assert_type",label:"\u6821\u9A8C\u65B9\u5F0F",required:!0,component:(0,K.jsx)(j.Z,{placeholder:"\u9009\u62E9\u6821\u9A8C\u65B9\u5F0F\uFF0C\u652F\u6301JSON\u6DF1\u5C42\u6B21\u5224\u65AD",children:Object.keys(ie.Z.ASSERT_TYPE).map(function(A){return(0,K.jsx)(p,{value:A,children:ie.Z.ASSERT_TYPE[A]},A)})}),type:"select",span:24},{name:"expected",label:"\u9884\u671F\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C",component:(0,K.jsx)(G.Z,{options:[],children:(0,K.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24},{name:"actually",label:"\u5B9E\u9645\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C",component:(0,K.jsx)(G.Z,{options:E,children:(0,K.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24}],CaseDetail:[{name:"name",label:"\u573A\u666F\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",component:null,span:8},{name:"priority",label:"\u4F18\u5148\u7EA7",required:!0,component:(0,K.jsx)(j.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7",children:ie.Z.PRIORITY.map(function(A){return(0,K.jsx)(p,{value:A,children:A},A)})}),type:"select",span:8},{name:"status",label:"\u72B6\u6001",required:!0,component:(0,K.jsx)(j.Z,{placeholder:"\u8BF7\u9009\u62E9\u5F53\u524D\u573A\u666F\u72B6\u6001",children:Object.keys(ie.Z.CASE_STATUS).map(function(A){return(0,K.jsx)(p,{value:A,children:(0,K.jsx)(Ee.Z,u()({},ie.Z.CASE_BADGE[A]))},A)})}),type:"select",span:8},{name:"request_type",label:"\u8BF7\u6C42\u7C7B\u578B",required:!0,component:(0,K.jsx)(j.Z,{placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u534F\u8BAE",children:Object.keys(s.XN).map(function(A){return(0,K.jsx)(p,{value:A,disabled:A!=="1",children:s.XN[A]},A)})}),type:"select",span:8},{name:"tag",label:"\u573A\u666F\u6807\u7B7E",required:!1,component:(0,K.jsx)(j.Z,{mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u6807\u7B7E"}),type:"select",span:8},{name:"case_type",label:"\u573A\u666F\u7C7B\u578B",required:!0,component:(0,K.jsxs)(j.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F\u7C7B\u578B",children:[(0,K.jsx)(p,{value:0,children:"\u666E\u901A\u573A\u666F"}),(0,K.jsx)(p,{value:1,children:"\u524D\u7F6E\u573A\u666F"}),(0,K.jsx)(p,{value:2,children:"\u6570\u636E\u5DE5\u5382"})]}),type:"select",span:8}],Environment:[{name:"name",label:"\u73AF\u5883\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",component:null,span:24},{name:"remarks",label:"\u5907\u6CE8",required:!1,message:"\u8BF7\u8F93\u5165\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",component:(0,K.jsx)(I.Z.TextArea,{maxLength:200}),span:24}]}},26194:function(Dt,Be,e){e.d(Be,{Z:function(){return Y}});var xe=e(12444),u=e.n(xe),ie=e(72004),j=e.n(ie),I=e(31996),G=e.n(I),Ee=e(26037),s=e.n(Ee),K=e(67294),p=e(53239),R=e.n(p),E=e(74981),A=e(82679),g=e.n(A),o=e(5619),Ue=e.n(o),L=e(41612),J=e.n(L),ue=e(90252),a=e.n(ue),n=e(85893),Y=function(M){G()(C,M);var st=s()(C);function C(){return u()(this,C),st.apply(this,arguments)}return j()(C,[{key:"componentDidMount",value:function(){var t=this;this.props.setEditor(this.refs),(0,A.addCompleter)({getCompletions:function(Se,D,Te,pe,We){We(null,(t.props.tables||[]).map(function(ge){return{name:ge,value:ge}}))}})}},{key:"render",value:function(){var t=this.props,Ce=t.value,Se=t.onChange,D=t.height,Te=t.readOnly,pe=t.theme;return(0,n.jsx)(E.ZP,{ref:"aceEditor",mode:"json",theme:pe||"material-one-dark",fontSize:14,showGutter:!0,showPrintMargin:!1,onChange:Se,value:Ce,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:D||300},setOptions:{readOnly:Te||!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4,useWorker:!0}})}}]),C}(K.Component)},99612:function(Dt,Be,e){e.d(Be,{e5:function(){return A},mi:function(){return E},dh:function(){return R},XN:function(){return K}});var xe=e(63100),u=e(97857),ie=e.n(u),j=e(37594),I=e(85893),G=function(g){var o=g.icon,Ue=g.text,L=g.font,J=L===void 0?13:L,ue=g.style,a=g.onClick,n=g.back,Y=n===void 0?!0:n;return Y?(0,I.jsxs)("span",{onClick:a,style:ie()({},ue),children:[(0,I.jsx)(j.B,{type:o,style:{fontSize:J}})," ",Ue]}):(0,I.jsxs)("span",{onClick:a,style:ie()({},ue),children:[Ue," ",(0,I.jsx)(j.B,{style:{fontSize:J},type:o})]})},Ee=e(67294),s=e(51904),K={1:(0,I.jsxs)("span",{children:[(0,I.jsx)(xe.Z,{theme:"outline",size:"14",fill:"#7ed321"})," HTTP"]}),2:(0,I.jsx)(G,{font:14,icon:"icon-GRPC",text:"GRPC"}),3:(0,I.jsx)(G,{font:14,icon:"icon-a-dubbo1",text:"Dubbo"})},p={1:(0,I.jsx)(s.Z,{color:"success",children:"HTTP"}),2:(0,I.jsx)(s.Z,{color:"orange",children:"GRPC"}),3:(0,I.jsx)(s.Z,{color:"blue",children:"DUBBO"})},R={GET:(0,I.jsx)(s.Z,{color:"success",children:"GET"}),POST:(0,I.jsx)(s.Z,{color:"blue",children:"POST"}),PUT:(0,I.jsx)(s.Z,{color:"cyan",children:"PUT"}),DELETE:(0,I.jsx)(s.Z,{color:"error",children:"DELETE"})},E={0:(0,I.jsx)(s.Z,{children:"\u666E\u901A"}),1:(0,I.jsx)(s.Z,{color:"blue",children:"\u6D4B\u8BD5\u8BA1\u5212"}),2:(0,I.jsx)(s.Z,{color:"success",children:"CI"}),3:(0,I.jsx)(s.Z,{children:"\u5176\u4ED6"})},A={0:(0,I.jsx)(s.Z,{color:"success",style:{marginLeft:8},children:"\u666E\u901A"}),1:(0,I.jsx)(s.Z,{color:"blue",style:{marginLeft:8},children:"\u524D\u7F6E"}),2:(0,I.jsx)(s.Z,{color:"warning",style:{marginLeft:8},children:"\u6570\u636E\u5DE5\u5382"})}},22763:function(Dt,Be,e){var xe=e(32983),u=e(82759),ie=e(85893);Be.Z=function(j){var I=j.desc,G=j.height,Ee=G===void 0?180:G,s=j.image,K=s===void 0?u.Z:s;return(0,ie.jsx)(xe.Z,{image:K,imageStyle:{height:Ee},description:I||"\u6682\u65E0\u6570\u636E"})}},7624:function(Dt,Be,e){var xe=e(20873),u=e(32983),ie=e(85893);Be.Z=function(j){var I=j.desc,G=j.height,Ee=G===void 0?180:G;return(0,ie.jsx)(u.Z,{image:xe.Z,imageStyle:{height:Ee},description:I||"\u6682\u65E0\u6570\u636E"})}},84298:function(Dt,Be,e){var xe=e(97857),u=e.n(xe),ie=e(5574),j=e.n(ie),I=e(67294),G=e(58131),Ee=e(69400),s=e(15746),K=e(76081),p=e(85893),R=G.Z.Item,E=function(g){var o=g.title,Ue=g.width,L=g.left,J=g.right,ue=g.formName,a=g.record,n=g.onFinish,Y=g.loading,M=g.fields,st=g.open,C=g.onCancel,He=g.offset,t=He===void 0?0:He,Ce=g.children,Se=g.Footer,D=g.onTest,Te=G.Z.useForm(),pe=j()(Te,1),We=pe[0],ge=function(){We.validateFields().then(function(oe){n(oe)})};(0,I.useEffect)(function(){We.resetFields(),We.setFieldsValue(a)},[a]);var c={labelCol:{span:L},wrapperCol:{span:J}};return(0,p.jsxs)(Ee.Z,{style:{marginTop:t},confirmLoading:Y,footer:Se!==void 0?(0,p.jsx)(Se,{onOk:ge,onCancel:C,onTest:function(){We.validateFields().then(function(oe){D(oe)})}}):void 0,title:o,width:Ue,open:st,onOk:ge,onCancel:C,children:[Ce||null,(0,p.jsx)(G.Z,u()(u()({form:We},c),{},{name:ue,initialValues:a,onFinish:n,children:M.map(function(y,oe){return(0,p.jsx)(s.Z,{span:y.span||24,children:(0,p.jsx)(R,{label:y.label,colon:y.colon||!0,initialValue:y.initialValue,rules:[{required:y.required,message:y.message}],name:y.name,valuePropName:y.valuePropName||"value",children:(0,K.Z)(y.type,y.placeholder,y.component)})},oe)})}))]})};Be.Z=E},76081:function(Dt,Be,e){var xe=e(96365),u=e(72269),ie=e(67294),j=e(85893),I=xe.Z.TextArea,G=function(s,K){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return p||(s==="input"?(0,j.jsx)(xe.Z,{placeholder:K}):s==="textarea"?(0,j.jsx)(I,{placeholder:K}):s==="switch"?(0,j.jsx)(u.Z,{}):null)};Be.Z=G},56262:function(Dt,Be,e){e.d(Be,{Z:function(){return ge}});var xe=e(67294),u=e(34041),ie=e(96365),j=e(71230),I=e(15746),G=e(15009),Ee=e.n(G),s=e(19632),K=e.n(s),p=e(99289),R=e.n(p),E=e(5574),A=e.n(E),g=e(97857),o=e.n(g),Ue=e(13769),L=e.n(Ue),J=e(58131),ue=e(2453),a=e(86738),n=e(25514),Y=e(96074),M=e(71577),st=e(64240),C=e(51042),He=e(19478),t=e(85893),Ce=["editing","dataIndex","title","type","setType","record","index","key","children"],Se=u.Z.Option,D=function(y){var oe=y.editing,r=y.dataIndex,de=y.title,je=y.type,be=y.setType,le=y.record,ft=y.index,Ae=y.key,T=y.children,_=L()(y,Ce);return(0,t.jsx)("td",o()(o()({},_),{},{children:oe?(0,t.jsx)(J.Z.Item,{name:r,style:{margin:0},initialValue:le.dataIndex,rules:[{required:!0,message:"Please Input ".concat(de,"!")}],children:(0,t.jsx)(ie.Z,{placeholder:"please input ".concat(de)})}):T}))},Te=function(y){var oe=y.data,r=y.setData,de=y.ossFileList,je=J.Z.useForm(),be=A()(je,1),le=be[0],ft=(0,xe.useState)(""),Ae=A()(ft,2),T=Ae[0],_=Ae[1],$e=(0,xe.useState)("FILE"),Ye=A()($e,2),Pe=Ye[0],_e=Ye[1],qe=(0,xe.useState)(null),we=A()(qe,2),ze=we[0],yt=we[1],rt=function(N){return N.key===T},vt=function(N){le.setFieldsValue(o()({},N)),_(N.key)},Et=function(){_("")},Zt=function(){var b=R()(Ee()().mark(function N(S){var ee,w,ct,ce,Ft;return Ee()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.prev=0,Oe.next=3,le.validateFields();case 3:if(ee=Oe.sent,!(Pe==="FILE"&&!ze)){Oe.next=7;break}return ue.ZP.info("\u8BF7\u9009\u62E9\u6587\u4EF6"),Oe.abrupt("return");case 7:if(w=K()(oe),ct=w.findIndex(function(F){return S===F.key}),!(ct>-1)){Oe.next=20;break}if(ce=w[ct],Ft=w.findIndex(function(F){return ee.key===F.key}),!(Ft>-1)){Oe.next=15;break}return ue.ZP.info("\u8BE5key\u5DF2\u5B58\u5728"),Oe.abrupt("return");case 15:w.splice(ct,1,o()(o()(o()({},ce),ee),{},{type:Pe,value:ze})),r(w),_(""),Oe.next=23;break;case 20:w.push(o()(o()({},ee),{},{type:Pe,value:ze})),r(w),_("");case 23:Oe.next=28;break;case 25:Oe.prev=25,Oe.t0=Oe.catch(0),console.log("Validate Failed:",Oe.t0);case 28:case"end":return Oe.stop()}},N,null,[[0,25]])}));return function(S){return b.apply(this,arguments)}}(),Bt=function(N){var S=K()(oe);S.splice(S.findIndex(function(ee){return N===ee.key}),1),r(S)},it=[{title:"KEY",dataIndex:"key",width:"30%",editable:!0},{title:"TYPE",dataIndex:"type",type:"select",width:"10%",render:function(N,S){return S.key===T?(0,t.jsxs)(u.Z,{style:{width:"100%"},value:Pe,onChange:function(w){_e(w)},children:[(0,t.jsx)(Se,{value:"FILE",children:"FILE"}),(0,t.jsx)(Se,{value:"TEXT",children:"TEXT"})]}):S.type}},{title:"VALUE",dataIndex:"value",width:"40%",render:function(N,S){return S.key===T?Pe==="FILE"?(0,t.jsx)(u.Z,{style:{width:"100%"},placeholder:"please select oss file",showSearch:!0,value:ze,onChange:function(w){return yt(w)},children:de.map(function(ee){return(0,t.jsx)(Se,{value:ee.file_path,children:ee.file_path},ee.file_path)})}):(0,t.jsx)(ie.Z,{placeholder:"please input VALUE",value:ze,onChange:function(w){yt(w.target.value)}}):Pe==="FILE"?(0,t.jsx)("a",{href:"".concat(He.Z.URL,"/oss/download?filepath=").concat(S.value),children:S.value}):S.value}},{title:"OPERATION",dataIndex:"operation",render:function(N,S){var ee=rt(S);return ee?(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{onClick:function(){return Zt(S.key)},style:{marginRight:8},children:"Save"}),(0,t.jsx)(a.Z,{title:"Sure to cancel?",onConfirm:Et,children:(0,t.jsx)("a",{children:"Cancel"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z.Link,{disabled:T!=="",onClick:function(){return vt(S)},children:"Edit"}),(0,t.jsx)(Y.Z,{type:"vertical"}),(0,t.jsx)(n.Z.Link,{disabled:T!=="",onClick:function(){return Bt(S.key)},children:"Remove"})]})}}],et=function(){var N=[].concat(K()(oe),[{key:"",type:"TEXT",value:null}]);r(N),_e("FILE")},xt=it.map(function(b){return b.editable?o()(o()({},b),{},{onCell:function(S,ee){return{record:S,index:ee,type:Pe,setType:_e,dataIndex:b.dataIndex,title:b.title,editing:rt(S)}}}):b});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z,{style:{marginBottom:12},children:(0,t.jsx)(I.Z,{span:6,children:(0,t.jsx)(M.ZP,{type:"primary",onClick:et,icon:(0,t.jsx)(C.Z,{}),children:"Add"})})}),(0,t.jsx)(J.Z,{form:le,component:!1,children:(0,t.jsx)(st.Z,{components:{body:{cell:D}},dataSource:oe,columns:xt,rowClassName:"editable-row",pagination:{onChange:Et}})})]})},pe=Te,We=u.Z.Option,ge=function(c){var y=c.ossFileList,oe=c.dataSource,r=c.setDataSource,de=[{title:"KEY",dataIndex:"key",render:function(){return(0,t.jsx)(ie.Z,{})}},{title:"VALUE",dataIndex:"value",render:function(){return(0,t.jsx)(u.Z,{children:y.map(function(be){return(0,t.jsx)(We,{value:be.key,children:be.key},be.key)})})}}];return(0,t.jsx)(j.Z,{gutter:8,style:{marginTop:16},children:(0,t.jsx)(I.Z,{span:24,children:(0,t.jsx)(pe,{bordered:!0,columns:de,data:oe,setData:r,ossFileList:y})})})}},15106:function(Dt,Be,e){var xe=e(9783),u=e.n(xe),ie=e(15009),j=e.n(ie),I=e(99289),G=e.n(I),Ee=e(52677),s=e.n(Ee),K=e(5574),p=e.n(K),R=e(67294),E=e(34041),A=e(93980),g=e(54689),o=e(68508),Ue=e(71230),L=e(15746),J=e(4393),ue=e(58131),a=e(83062),n=e(96365),Y=e(71577),M=e(78045),st=e(13013),C=e(64240),He=e(65987),t=e(31484),Ce=e(63783),Se=e(34804),D=e(53677),Te=e(12414),pe=e(10981),We=e(89609),ge=e(56262),c=e(94171),y=e(26194),oe=e(37594),r=e(85893),de=E.Z.Option,je=A.Z.TabPane,be={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},le=function(T){return T&&T.response?(0,r.jsx)("div",{style:{marginRight:16},children:(0,r.jsxs)("span",{children:["Status:",(0,r.jsxs)("span",{style:{color:be[T.status_code]?be[T.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[T.status_code," ",be[T.status_code]?be[T.status_code].text:""]}),(0,r.jsxs)("span",{style:{marginLeft:8,marginRight:8},children:["Time: ",(0,r.jsx)("span",{style:{color:"#67C23A"},children:T.cost})]})]})}):null},ft=function(T){var _=T.form,$e=T.gconfig,Ye=T.dispatch,Pe=T.body,_e=T.setBody,qe=T.headers,we=T.setHeaders,ze=T.formData,yt=T.setFormData,rt=T.caseInfo,vt=T.bodyType,Et=T.setBodyType,Zt=T.save,Bt=Zt===void 0?null:Zt,it=(0,R.useState)("JSON"),et=p()(it,2),xt=et[0],b=et[1],N=(0,R.useState)("GET"),S=p()(N,2),ee=S[0],w=S[1],ct=(0,R.useState)([]),ce=p()(ct,2),Ft=ce[0],Ke=ce[1],Oe=(0,R.useState)(function(){return Ft.map(function(d){return d.id})}),F=p()(Oe,2),l=F[0],P=F[1],ae=(0,R.useState)(function(){return qe.map(function(d){return d.id})}),fe=p()(ae,2),tt=fe[0],ke=fe[1],O=(0,R.useState)(!1),i=p()(O,2),m=i[0],V=i[1],$=(0,R.useState)({}),Z=p()($,2),f=Z[0],ye=Z[1],re=(0,R.useState)(""),Q=p()(re,2),nt=Q[0],ve=Q[1],Ne=(0,R.useState)(null),X=p()(Ne,2),U=X[0],te=X[1],Re=(0,R.useState)(!1),Qe=p()(Re,2),Xe=Qe[0],Ve=Qe[1],q=$e.ossFileList,me=$e.envMap,Ge=$e.addressList,ut=function(){if(Pe){var h=JSON.parse(Pe);s()(h)==="object"&&h[0]!==void 0&&yt(h)}};(0,R.useEffect)(function(){rt&&w(rt.request_method)},[rt.request_method]),(0,R.useEffect)(function(){if(vt===2){Ye({type:"gconfig/listOssFile"});try{ut()}catch(d){}}},[vt]),(0,R.useEffect)(function(){Ye({type:"gconfig/fetchAddress"})},[]);var Ie=function(){var d=G()(j()().mark(function h(){return j()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:ve(_.getFieldValue("url")),jt(_.getFieldValue("url"));case 2:case"end":return ne.stop()}},h)}));return function(){return d.apply(this,arguments)}}();(0,R.useEffect)(function(){Ie()},[Pe]);var Me=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],gt=function(h){if(!f[h])return[];var v=JSON.parse(f[h]);return Object.keys(v).map(function(ne){return{key:ne,value:v[ne]}})},ot=function(h){var v=_.getFieldValue("url"),ne;v===void 0?ne="":ne=v.split("?")[0],h.forEach(function(De,mt){De.key&&(mt===0?ne="".concat(ne,"?").concat(De.key,"=").concat(De.value||""):ne="".concat(ne,"&").concat(De.key,"=").concat(De.value||""))}),_.setFieldsValue({url:ne})},jt=function(h){if(!!h){var v=h.split("?");if(v.length<2)Ke([]);else{var ne=v[1].split("&"),De=[],mt=[];ne.forEach(function(lt,At){var Ot=lt.split("="),Pt=p()(Ot,2),It=Pt[0],Ut=Pt[1],Mt=Date.now();mt.push(Mt+At+10),De.push({key:It,value:Ut,id:Mt+At+10,description:""})}),Ke(De),P(mt)}}},Ze=function(h){b(h)},Ct=function(){var h={};return qe.forEach(function(v){v.key!==""&&(h[v.key]=v.value)}),h},Tt=function(){var d=G()(j()().mark(function h(){var v,ne,De;return j()().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(v=_.getFieldValue("url"),v!==""){lt.next=4;break}return g.Z.error({message:"\u8BF7\u6C42Url\u4E0D\u80FD\u4E3A\u7A7A"}),lt.abrupt("return");case 4:return V(!0),ne={method:ee||"GET",url:v,body:Pe,body_type:vt,headers:Ct()},vt===0&&(ne.body=null),lt.next=9,(0,Te.c3)(ne);case 9:De=lt.sent,V(!1),pe.Z.response(De,!0)&&ye(De.data);case 12:case"end":return lt.stop()}},h)}));return function(){return d.apply(this,arguments)}}(),bt=function(h,v){if(h==="params"){var ne=Ft.filter(function(mt){return mt.id!==v});Ke(ne),ot(ne)}else{var De=qe.filter(function(mt){return mt.id!==v});we(De)}},ht=(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("Text")},children:"Text"})},"Text"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("JavaScript")},children:"JavaScript"})},"JavaScript"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("JSON")},children:"JSON"})},"JSON"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("HTML")},children:"HTML"})},"HTML"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("XML")},children:"XML"})},"XML")]}),he=function(h){return[{title:"KEY",key:"key",dataIndex:"key"},{title:"VALUE",key:"value",dataIndex:"value"},{title:"DESCRIPTION",key:"description",dataIndex:"description"},{title:"\u64CD\u4F5C",valueType:"option",render:function(ne,De){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(He.Z,{style:{cursor:"pointer"},onClick:function(){P([De.id])}}),(0,r.jsx)(t.Z,{style:{cursor:"pointer",marginLeft:8},onClick:function(){bt(h,De.id)},twoToneColor:"#eb2f96"})]})}}]},Je=function(h){return h===0?(0,r.jsx)("div",{style:{height:"20vh",lineHeight:"20vh",textAlign:"center"},children:"This request does not have a body"}):h===2?(0,r.jsx)(ge.Z,{ossFileList:q,dataSource:ze,setDataSource:yt}):(0,r.jsx)(Ue.Z,{style:{marginTop:12},children:(0,r.jsx)(L.Z,{span:24,children:(0,r.jsx)(J.Z,{bodyStyle:{padding:0},children:(0,r.jsx)(y.Z,{value:Pe,onChange:function(ne){return _e(ne)},height:"20vh",setEditor:te})})})})},se=function(){var h={};return Ge.forEach(function(v){h[v.name]===void 0?h[v.name]=u()({},v.env,v.gateway):h[v.name][v.env]=v.gateway}),h},z=se(),H=(0,r.jsx)(ue.Z.Item,{name:"base_path",noStyle:!0,children:(0,r.jsxs)(E.Z,{style:{width:130},placeholder:"\u9009\u62E9BasePath",showSearch:!0,allowClear:!0,optionLabelProp:"label",filterOption:function(h,v){return v.children.length>1?!1:v.children.props.children.indexOf(h.toLowerCase())>=0},children:[(0,r.jsxs)(de,{value:null,label:"\u65E0",children:["\u65E0",(0,r.jsx)("a",{style:{float:"right",fontSize:12},href:"/#/config/address",children:"\u53BB\u914D\u7F6E"})]}),Object.keys(z).map(function(d){return(0,r.jsx)(de,{value:d,label:d,children:(0,r.jsx)(a.Z,{title:(0,r.jsx)("div",{children:Object.keys(z[d]).map(function(h){return(0,r.jsxs)("p",{children:[me[h],": ",z[d][h]]})})}),children:d})},d)})]})});return(0,r.jsxs)(ue.Z,{form:_,children:[(0,r.jsxs)(Ue.Z,{gutter:[8,8],children:[(0,r.jsx)(L.Z,{span:20,children:(0,r.jsxs)(ue.Z,{layout:"inline",form:_,children:[(0,r.jsx)(L.Z,{span:8,children:(0,r.jsx)(ue.Z.Item,{colon:!1,name:"request_method",label:"\u8BF7\u6C42\u65B9\u5F0F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"}],initialValue:ee,children:(0,r.jsxs)(E.Z,{placeholder:"\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F",onChange:function(h){return w(h)},style:{width:120,textAlign:"left"},children:[(0,r.jsx)(de,{value:"GET",children:"GET"},"GET"),(0,r.jsx)(de,{value:"POST",children:"POST"},"POST"),(0,r.jsx)(de,{value:"PUT",children:"PUT"},"PUT"),(0,r.jsx)(de,{value:"DELETE",children:"DELETE"},"DELETE")]})})}),(0,r.jsx)(L.Z,{span:16,children:(0,r.jsx)(ue.Z.Item,{name:"url",colon:!1,label:(0,r.jsxs)(a.Z,{title:"\u70B9\u51FB\u53EF\u5C55\u5F00\u5168\u5C40\u53D8\u91CF\u63D0\u793A",children:["\u8BF7\u6C42\u5730\u5740",(0,r.jsx)(Ce.Z,{style:{marginLeft:4},onClick:function(){return Ve(!0)}})]}),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42url"}],children:(0,r.jsx)(n.Z,{addonBefore:H,style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u8981\u8BF7\u6C42\u7684url",onChange:function(h){jt(h.target.value),_.setFieldsValue({url:h.target.value}),ve(h.target.value)}})})})]})}),(0,r.jsx)(L.Z,{span:4,children:(0,r.jsx)("div",{style:{float:"right"},children:Bt?null:(0,r.jsxs)(Y.ZP,{onClick:Tt,loading:m,type:"primary",children:[(0,r.jsx)(oe.B,{type:"icon-fasong1"}),"Send"," "]})})})]}),(0,r.jsx)(Ue.Z,{style:{marginTop:8},children:(0,r.jsxs)(A.Z,{defaultActiveKey:"1",style:{width:"100%"},children:[(0,r.jsx)(je,{tab:"Params",children:(0,r.jsx)(D.Z,{columns:he("params"),title:"Query Params",dataSource:Ft,setDataSource:Ke,extra:ot,editableKeys:l,setEditableRowKeys:P})},"1"),(0,r.jsx)(je,{tab:"Headers",children:(0,r.jsx)(D.Z,{columns:he("headers"),title:"Headers",dataSource:qe,setDataSource:we,editableKeys:tt,setEditableRowKeys:ke})},"2"),(0,r.jsxs)(je,{tab:"Body",children:[(0,r.jsxs)(Ue.Z,{children:[(0,r.jsxs)(M.ZP.Group,{defaultValue:0,value:vt,onChange:function(h){Et(h.target.value),h.target.value==="form-data"&&Ye({type:"gconfig/listOssFile"})},children:[(0,r.jsx)(M.ZP,{value:0,children:"none"}),(0,r.jsx)(M.ZP,{value:2,children:"form-data"}),(0,r.jsx)(M.ZP,{value:3,children:"x-www-form-urlencoded"}),(0,r.jsx)(M.ZP,{value:1,children:"raw"}),(0,r.jsx)(M.ZP,{value:4,children:"binary"}),(0,r.jsx)(M.ZP,{value:5,children:"GraphQL"})]}),vt===1?(0,r.jsx)(st.Z,{style:{marginLeft:8},overlay:ht,trigger:["click"],children:(0,r.jsxs)("a",{onClick:function(h){return h.preventDefault()},children:[xt," ",(0,r.jsx)(Se.Z,{})]})}):null]}),Je(vt)]},"3")]})}),(0,r.jsx)(Ue.Z,{gutter:[8,8],children:Object.keys(f).length===0?null:(0,r.jsxs)(A.Z,{style:{width:"100%"},tabBarExtraContent:le(f),children:[(0,r.jsx)(je,{tab:"Body",children:(0,r.jsx)(y.Z,{value:f.response,readOnly:!0,height:"30vh",setEditor:te})},"1"),(0,r.jsx)(je,{tab:"Cookie",children:(0,r.jsx)(C.Z,{columns:Me,dataSource:gt("cookies"),size:"small",pagination:!1})},"2"),(0,r.jsx)(je,{tab:"Headers",children:(0,r.jsx)(C.Z,{columns:Me,dataSource:gt("response_headers"),size:"small",pagination:!1})},"3")]})})]})};Be.Z=(0,c.connect)(function(Ae){var T=Ae.gconfig;return{gconfig:T}})(ft)},53677:function(Dt,Be,e){var xe=e(67294),u=e(23879),ie=e(85893);Be.Z=function(j){var I=j.columns,G=j.dataSource,Ee=j.title,s=j.setDataSource,K=j.editableKeys,p=j.setEditableRowKeys,R=j.extra;return(0,xe.useEffect)(function(){p(G.map(function(E){return E.id}))},[G]),(0,ie.jsx)(u.Z,{headerTitle:Ee,columns:I,rowKey:"id",value:G,onChange:s,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{id:Date.now()}}},editable:{type:"multiple",editableKeys:K,actionRender:function(A,g,o){return[o.delete]},onValuesChange:function(A,g){R&&R(g),s(g)},onChange:p}})}},65245:function(Dt,Be,e){e.d(Be,{Z:function(){return n}});var xe=e(19632),u=e.n(xe),ie=e(13769),j=e.n(ie),I=e(15009),G=e.n(I),Ee=e(99289),s=e.n(Ee),K=e(97857),p=e.n(K),R=e(64240),E=e(95742),A=e(60532),g=e(62748),o=e(85893),Ue=["className","style"],L=(0,E.JV)(function(){return(0,o.jsx)(A.Z,{style:{cursor:"grab",color:"#999"}})}),J=[{title:"\u6392\u5E8F",dataIndex:"sort",width:65,className:"drag-visible",render:function(){return(0,o.jsx)(L,{})}}],ue=(0,E.gU)(function(Y){return(0,o.jsx)("tr",p()({},Y))}),a=(0,E.hv)(function(Y){return(0,o.jsx)("tbody",p()({},Y))}),n=function(Y){var M=Y.dataSource,st=Y.columns,C=Y.setDataSource,He=Y.dragCallback,t=Y.loading,Ce=function(){var Te=s()(G()().mark(function pe(We){var ge,c,y,oe;return G()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(ge=We.oldIndex,c=We.newIndex,ge===c){de.next=11;break}if(y=(0,g.q)([].concat(M),ge,c).filter(function(je){return!!je}),!He){de.next=10;break}return de.next=6,He(y);case 6:oe=de.sent,(oe||oe===void 0)&&C(y),de.next=11;break;case 10:C(y);case 11:case"end":return de.stop()}},pe)}));return function(We){return Te.apply(this,arguments)}}(),Se=function(pe){return(0,o.jsx)(a,p()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:Ce},pe))},D=function(pe){var We=pe.className,ge=pe.style,c=j()(pe,Ue),y=M.findIndex(function(oe){return oe.index===c["data-row-key"]});return(0,o.jsx)(ue,p()({index:y},c))};return(0,o.jsx)(R.Z,{pagination:!1,dataSource:M,loading:t,columns:[].concat(J,u()(st)),rowKey:"index",components:{body:{wrapper:Se,row:D}}})}},80242:function(Dt,Be,e){e.d(Be,{Z:function(){return Oe}});var xe=e(15009),u=e.n(xe),ie=e(9783),j=e.n(ie),I=e(19632),G=e.n(I),Ee=e(97857),s=e.n(Ee),K=e(99289),p=e.n(K),R=e(5574),E=e.n(R),A=e(3363),g=e(71230),o=e(15746),Ue=e(85265),L=e(71577),J=e(94171),ue=e(37594),a=e(67294),n=e(34041),Y=e(83062),M=e(72269),st=e(16165),C=e(58131),He=e(76081),t=e(85893),Ce=C.Z.Item,Se=function(F){var l=F.left,P=F.right,ae=F.formName,fe=F.record,tt=F.onFinish,ke=F.fields,O=F.pForm,i=O;if(O===void 0){var m=C.Z.useForm(),V=E()(m,1),$=V[0];i=$}var Z={labelCol:{span:l},wrapperCol:{span:P}};return(0,a.useEffect)(function(){i.setFieldsValue(fe)},[fe]),(0,t.jsx)(C.Z,s()(s()({form:i},Z),{},{name:ae,initialValues:fe,onFinish:tt,children:(0,t.jsx)(g.Z,{gutter:8,children:ke.map(function(f){return(0,t.jsx)(o.Z,{span:f.span||24,children:(0,t.jsx)(Ce,s()(s()({label:f.label,colon:f.colon||!0,rules:[{required:f.required,message:f.message}],name:f.name,valuePropName:f.valuePropName||"value"},f.layout||Z),{},{children:(0,He.Z)(f.type,f.placeholder,f.component)}))})})})}))},D=e(19478),Te=e(26194),pe=n.Z.Option,We=function(F){var l=F.data,P=F.form,ae=F.dispatch,fe=F.testcaseData,tt=F.constructorType,ke=(0,a.useState)(null),O=E()(ke,2),i=O[0],m=O[1];(0,a.useEffect)(function(){ae({type:"construct/getTestCaseListTree"})},[]);var V=[{name:"name",label:"\u540D\u79F0",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6B65\u9AA4\u540D\u79F0",initialValue:l.name,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"constructor_case_id",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,initialValue:l.constructor_case_id,placeholder:"\u8BF7\u9009\u62E9\u6D4B\u8BD5\u573A\u666F",component:(0,t.jsx)(n.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F",children:fe.map(function($){return(0,t.jsx)(pe,{value:$.id,children:$.name},$.id)})}),span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"value",label:"\u8FD4\u56DE\u503C",placeholder:"\u8BF7\u586B\u5199\u8FD4\u56DE\u53D8\u91CF\u540D\u79F0\uFF0C\u4E0D\u9700\u8981\u53EF\u4E0D\u586B",required:!1,type:"input",initialValue:l.value,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"public",label:(0,t.jsx)(Y.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB",(0,t.jsx)(st.Z,{})]})}),required:!0,component:(0,t.jsx)(M.Z,{}),valuePropName:"checked",initialValue:l.public,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"enable",label:"\u542F\u7528",required:!0,component:(0,t.jsx)(M.Z,{}),valuePropName:"checked",initialValue:l.enable,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"params",label:"\u52A8\u6001\u53C2\u6570",required:!1,component:(0,t.jsx)(Te.Z,{height:150,setEditor:m})}];return(0,t.jsx)(Se,{fields:V,left:4,right:20,record:l,pForm:P})},ge=e(59847),c=n.Z.Option,y=function(l){var P=l.construct,ae=l.dispatch,fe=l.suffix,tt=fe===void 0?!0:fe,ke=P.constructorData,O=P.searchConstructor,i=P.constructorType,m=function(Z){ae({type:"construct/save",payload:Z})},V=function(){ae({type:"construct/getConstructorTree",payload:{constructor_type:i,suffix:tt}})};return(0,a.useEffect)(function(){V()},[i]),(0,t.jsx)(g.Z,{style:{marginTop:24},children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({label:"\u6570\u636E\u7C7B\u578B",name:"type"},D.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(n.Z,{disabled:!0,defaultValue:i,children:Object.keys(D.Z.CONSTRUCTOR_TYPE).map(function($){return(0,t.jsx)(c,{value:parseInt($,10),children:D.Z.CONSTRUCTOR_TYPE[$]},$)})})}))}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({label:"\u590D\u5236\u6784\u9020\u6761\u4EF6"},D.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(ge.Z,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:O,filterTreeNode:function(Z,f){return f.title.toLowerCase().indexOf(Z.toLowerCase())>-1},dropdownStyle:{maxHeight:600,overflow:"auto"},treeData:ke,placeholder:"\u901A\u8FC7\u641C\u7D22\u6784\u9020\u6761\u4EF6\uFF0C\u53EF\u4EE5\u5FEB\u901F\u590D\u5236\u53C2\u6570\u54E6\uFF01",treeDefaultExpandAll:!0,onChange:function(Z){m({searchConstructor:Z}),ae(Z!==void 0?{type:"construct/getConstructorData",payload:{id:Z.split("_")[1]}}:{type:"construct/save",payload:{testCaseConstructorData:{type:i,public:!0,enable:!0}}})}})}))})]})})})},oe=(0,J.connect)(function(F){var l=F.loading,P=F.construct;return{loading:l,construct:P}})(y),r=function(l){var P=l.caseId,ae=l.construct,fe=l.dispatch,tt=l.form,ke=l.onFinish,O=l.suffix,i=ae.testcaseData,m=ae.testCaseConstructorData,V=ae.constructorType;return(0,t.jsx)(g.Z,{style:{marginTop:24},gutter:[8,8],children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(oe,{suffix:O}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsx)(We,{data:m,dispatch:fe,testcaseData:i,constructorType:V,form:tt})})})]})})},de=(0,J.connect)(function(F){var l=F.construct,P=F.loading;return{construct:l,loading:P}})(r),je=e(60219),be=e(68508),le=e(96365),ft=e(26838),Ae=e(1633),T=e(63783),_=function(){return(0,t.jsx)(Y.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB ",(0,t.jsx)(T.Z,{})]})})},$e=n.Z.Option,Ye=function(l){var P=l.form,ae=l.dispatch,fe=l.construct,tt=l.gconfig,ke=l.suffix,O=(0,a.useState)("1"),i=E()(O,2),m=i[0],V=i[1],$=(0,a.useState)(null),Z=E()($,2),f=Z[0],ye=Z[1],re=fe.testCaseConstructorData,Q=fe.constructorType,nt=tt.dbConfigData,ve=function(){var U=nt.map(function(te){return te.name});return Array.from(new Set(U))},Ne=function(U){V(U.key)};return(0,a.useEffect)(function(){ae({type:"gconfig/fetchDbConfig"})},[]),(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(re)},[re]),(0,t.jsx)(g.Z,{gutter:8,style:{marginTop:24},children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:3,children:(0,t.jsxs)(be.Z,{onClick:Ne,style:{width:128},defaultSelectedKeys:["1"],defaultOpenKeys:["1"],mode:"inline",children:[(0,t.jsx)(be.Z.Item,{children:"\u7F16\u8F91SQL"},"1"),(0,t.jsx)(be.Z.Item,{children:"\u8C03\u8BD5SQL"},"2")]})}),m!=="1"?(0,t.jsx)(o.Z,{span:21,children:(0,t.jsx)(ft.Z,{leftHeight:420,cardHeight:130,tableHeight:272,editorHeight:130,imageHeight:60})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(o.Z,{span:21,children:[(0,t.jsx)(oe,{suffix:ke}),(0,t.jsxs)(C.Z,s()(s()({},D.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"}],initialValue:re.name,children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u6570\u636E\u5E93",name:"database",initialValue:re.database,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010\u6570\u636E\u5E93\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u4F1A\u6839\u636E\u73AF\u5883\u81EA\u52A8\u5BFB\u627E\u5BF9\u5E94\u7684\u6570\u636E\u5E93",children:ve().map(function(X){return(0,t.jsx)($e,{value:X,children:X},X)})})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:re.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:re.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(Y.Z,{title:"\u5207\u6362\u5DE6\u4FA7\u83DC\u5355\u53EF\u8FDB\u5165SQL\u7F16\u8F91\u5668",children:["SQL\u8BED\u53E5 ",(0,t.jsx)(T.Z,{})]}),name:"sql",rules:[{required:!0,message:"\u8BF7\u586B\u5199SQL\u8BED\u53E5"}],initialValue:re.sql,children:(0,t.jsx)(Ae.Z,{language:"mysql",height:150,setEditor:ye})}))]}))]})})]})})})},Pe=(0,J.connect)(function(F){var l=F.construct,P=F.gconfig,ae=F.loading;return{construct:l,gconfig:P,loading:ae}})(Ye),_e=e(97321),qe=e(93980),we=e(2453),ze=e(54689),yt=e(24315),rt=e(73505),vt=qe.Z.TabPane,Et=n.Z.Option,Zt=function(l){var P=l.form,ae=l.dispatch,fe=l.construct,tt=l.gconfig,ke=l.suffix,O=(0,a.useState)(null),i=E()(O,2),m=i[0],V=i[1],$=(0,a.useState)(null),Z=E()($,2),f=Z[0],ye=Z[1],re=fe.testCaseConstructorData,Q=fe.constructorType,nt=tt.redisConfig,ve=tt.envMap;(0,a.useEffect)(function(){ae({type:"gconfig/fetchRedisConfig"})},[]),(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(re)},[re]);var Ne=function(){var X=p()(u()().mark(function U(te){var Re;return u()().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(!(!f||!te)){Xe.next=3;break}return we.ZP.info("\u8BF7\u9009\u62E9redis\u6216\u5B8C\u5584Redis\u547D\u4EE4"),Xe.abrupt("return");case 3:return Xe.next=5,ae({type:"gconfig/onlineRedisCommand",payload:{id:f,command:te}});case 5:Re=Xe.sent,ze.Z.success({message:"\u6267\u884C\u5B8C\u6210",description:Re});case 7:case"end":return Xe.stop()}},U)}));return function(te){return X.apply(this,arguments)}}();return(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(oe,{suffix:ke}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(C.Z,s()(s()({},D.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"}],initialValue:re.name,children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:(0,t.jsxs)(Y.Z,{title:"\u6D4B\u8BD5\u7684\u65F6\u5019\u53EF\u4EE5\u9009\u4E2D\u5BF9\u5E94\u73AF\u5883\u7684redis\uFF0C\u5426\u5219\u53EF\u4EE5\u968F\u4FBF\u9009\u4E00\u4E2A\u540D\u79F0\u7B26\u5408\u7684redis",children:["Redis ",(0,t.jsx)(T.Z,{})]}),name:"redis",initialValue:re.redis,rules:[{required:!0,message:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010Redis\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0",onSelect:function(U,te){ye(te.key)},children:nt.map(function(X){return(0,t.jsxs)(Et,{value:X.name,children:[X.name,"(",ve[X.env],")"]},X.id)})})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:re.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:re.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(Y.Z,{title:"\u70B9\u51FB\u53EF\u6267\u884CRedis\u547D\u4EE4",children:["Redis\u547D\u4EE4",(0,t.jsx)(rt.Z,{twoToneColor:"#67C23A",onClick:p()(u()().mark(function X(){return u()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,Ne(P.getFieldValue("command"));case 2:case"end":return te.stop()}},X)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1,rules:[{required:!0,message:"\u8BF7\u586B\u5199redis\u6267\u884C\u8BED\u53E5"}],initialValue:re.command,children:(0,t.jsx)(yt.Z,{language:"text",height:150,setEditor:V})}))]}))})})]})})},Bt=(0,J.connect)(function(F){var l=F.construct,P=F.gconfig,ae=F.loading;return{construct:l,gconfig:P,loading:ae}})(Zt),it=e(53239),et=e(4007);function xt(F){return(0,t.jsx)(yt.Z,s()(s()({},F),{},{langugae:"python"}))}var b=function(l){var P=l.form,ae=l.dispatch,fe=l.construct,tt=l.suffix,ke=(0,a.useState)(null),O=E()(ke,2),i=O[0],m=O[1],V=fe.testCaseConstructorData;(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(V)},[V]);var $=function(){var Z=p()(u()().mark(function f(){var ye,re,Q;return u()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(ye=P.getFieldValue("command"),re=P.getFieldValue("value"),ye){ve.next=5;break}return we.ZP.info("\u811A\u672C\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),ve.abrupt("return");case 5:return ve.next=7,ae({type:"testcase/onlinePyScript",payload:{value:re,command:ye}});case 7:Q=ve.sent,ze.Z.success({message:"\u6267\u884C\u5B8C\u6210",description:Q});case 9:case"end":return ve.stop()}},f)}));return function(){return Z.apply(this,arguments)}}();return(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(oe,{suffix:tt}),(0,t.jsxs)(C.Z,s()(s()({},D.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"}],initialValue:V.name,children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:V.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:V.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(C.Z.Item,s()(s()({label:(0,t.jsxs)(Y.Z,{title:"\u70B9\u51FB\u53EF\u6D4B\u8BD5Python\u811A\u672C",children:["Python\u811A\u672C",(0,t.jsx)(rt.Z,{twoToneColor:"#67C23A",onClick:p()(u()().mark(function Z(){return u()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,$(P.getFieldValue("command"));case 2:case"end":return ye.stop()}},Z)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1},D.Z.SQL_LAYOUT),{},{initialValue:V.command,rules:[{required:!0,message:"\u8BF7\u8F93\u5165python\u4EE3\u7801"}],children:(0,t.jsx)(xt,{language:"python",height:180,setEditor:m})}))]}))]})})},N=(0,J.connect)(function(F){var l=F.construct,P=F.loading;return{construct:l,loading:P}})(b),S=e(4393),ee=e(15106),w=function(l){var P=l.form,ae=l.dispatch,fe=l.construct,tt=l.suffix,ke=l.headers,O=l.setHeaders,i=l.body,m=l.setBody,V=l.bodyType,$=l.setBodyType,Z=fe.testCaseConstructorData;return(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(Z),Z.body_type&&$(Z.body_type),Z.headers&&O(Z.headers||[]),m(Z.body)},[Z]),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(oe,{suffix:tt}),(0,t.jsxs)(C.Z,s()(s()({},D.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"}],initialValue:Z.name,children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(le.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:Z.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},D.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:Z.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsx)(S.Z,{bordered:!0,children:(0,t.jsx)(ee.Z,{bodyType:V,setBodyType:$,form:P,caseInfo:{},body:i,setBody:m,headers:ke,setHeaders:O,save:!1})})})})]}))]})})},ct=(0,J.connect)(function(F){var l=F.construct,P=F.loading;return{construct:l,loading:P}})(w),ce=e(59697),Ft=A.Z.Step,Ke=function(l){var P=l.modal,ae=l.form,fe=l.setModal,tt=l.caseId,ke=l.dispatch,O=l.construct,i=l.testcase,m=l.width,V=l.fetchData,$=l.record,Z=l.suffix,f=Z===void 0?!1:Z,ye=l.createMode,re=ye===void 0?!1:ye,Q=O.currentStep,nt=O.totalStep,ve=O.constructorType,Ne=O.testCaseConstructorData,X=i.preConstructor,U=i.postConstructor,te=(0,a.useState)([]),Re=E()(te,2),Qe=Re[0],Xe=Re[1],Ve=(0,a.useState)(""),q=E()(Ve,2),me=q[0],Ge=q[1],ut=(0,a.useState)(0),Ie=E()(ut,2),Me=Ie[0],gt=Ie[1],ot=function(he){ke({type:"construct/save",payload:he})},jt=function(he){switch(Ne.type){case 0:return JSON.stringify({constructor_case_id:he.constructor_case_id,params:he.params});case 1:return JSON.stringify({database:he.database,sql:he.sql});case 2:return JSON.stringify({redis:he.redis,command:he.command});case 3:return JSON.stringify({command:he.command});case 4:return JSON.stringify({body:me,headers:ce.Z.translateHeaders(Qe),base_path:he.base_path,url:he.url,request_method:he.request_method,body_type:Me})}},Ze=function(){var ht=p()(u()().mark(function he(){var Je,se,z,H,d;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ae.validateFields();case 2:if(Je=v.sent,se={value:Je.value,type:Ne.type,name:Je.name,constructor_json:jt(Je),enable:Je.enable,case_id:tt,public:Je.public},re){v.next=17;break}if(!$.id){v.next=11;break}return v.next=8,ke({type:"construct/update",payload:s()(s()({},se),{},{id:$.id,suffix:f})});case 8:z=v.sent,v.next=14;break;case 11:return v.next=13,ke({type:"construct/insert",payload:s()(s()({},se),{},{suffix:f})});case 13:z=v.sent;case 14:z&&V(),v.next=20;break;case 17:d=G()(f?U:X),$.tempIndex===void 0?d.push(s()(s()({},se),{},{suffix:f,index:d.length})):d.splice($.tempIndex,1,s()(s()({},se),{},{suffix:f})),ke({type:"testcase/save",payload:(H={},j()(H,f?"postConstructor":"preConstructor",d),j()(H,"constructorModal",!1),H)});case 20:case"end":return v.stop()}},he)}));return function(){return ht.apply(this,arguments)}}(),Ct=function(he){ot({constructorType:he,testCaseConstructorData:{type:he,public:!0,enable:!0},currentStep:Q+1})},Tt=function(){if(Q===0)return(0,t.jsxs)(g.Z,{gutter:[12,12],style:{marginTop:36},children:[(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(ue.B,{type:"icon-yongliliebiao",style:{fontSize:32}}),title:"\u6D4B\u8BD5\u573A\u666F",description:"\u6D4B\u8BD5\u573A\u666F\u53EF\u4EE5\u590D\u7528, \u5E76\u4F20\u9012\u7528\u4F8B\u7684\u6570\u636E\u7ED9\u4E0B\u4E00\u4E2A\u573A\u666F",onClick:function(){return Ct(0)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(ue.B,{type:"icon-mysql11",style:{fontSize:32}}),title:"SQL\u8BED\u53E5",description:"\u901A\u8FC7\u6267\u884CSQL\u8BED\u53E5\uFF0C\u53EF\u4EE5\u9020\u51FA/\u6062\u590D\u7528\u4F8B\u573A\u666F\u9700\u8981\u7684\u6570\u636E",onClick:function(){return Ct(1)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(ue.B,{type:"icon-redis2",style:{fontSize:32}}),title:"Redis\u64CD\u4F5C",description:"\u901A\u8FC7\u64CD\u4F5CRedis\uFF0C\u53EF\u4EE5\u83B7\u53D6\u6216\u8005\u6821\u9A8C\u7F13\u5B58\u4E2D\u7684\u6570\u636E",onClick:function(){return Ct(2)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(ue.B,{type:"icon-python",style:{fontSize:32}}),title:"Python\u65B9\u6CD5",description:"\u9700\u8981\u81EA\u5B9A\u4E49\u9020\u6570\u65B9\u6CD5\u7684\uFF0C\u53EF\u4EE5\u4F7F\u7528Python\u7F16\u5199\u5BF9\u5E94\u7684\u6838\u5FC3\u65B9\u6CD5",onClick:function(){return Ct(3)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(ue.B,{type:"icon-qingqiu",style:{fontSize:32}}),title:"HTTP\u8BF7\u6C42",description:"\u4F9D\u8D56\u4E8E\u7B2C\u4E09\u65B9\u7684\u63A5\u53E3\uFF0C\u63A8\u8350\u4F7F\u7528HTTP\u8BF7\u6C42\uFF0C\u5982\u901A\u8FC7\u767E\u5EA6api\u8BC6\u522B\u5BF9\u5E94\u56FE\u7247\u9A8C\u8BC1\u7801",onClick:function(){return Ct(4)}})})]});if(Q===1){if(ve===0)return(0,t.jsx)(de,{form:ae,suffix:f});if(ve===1)return(0,t.jsx)(Pe,{form:ae,suffix:f});if(ve===2)return(0,t.jsx)(Bt,{form:ae,suffix:f});if(ve===3)return(0,t.jsx)(N,{form:ae,suffix:f});if(ve===4)return(0,t.jsx)(ct,{suffix:f,form:ae,headers:Qe,bodyType:Me,setBodyType:gt,setHeaders:Xe,body:me,setBody:Ge})}},bt=function(){ot({currentStep:Q-1})};return(0,t.jsx)(Ue.Z,{title:f?"\u540E\u7F6E\u6B65\u9AA4":"\u524D\u7F6E\u6B65\u9AA4",width:m||800,open:P,onClose:function(){return fe(!1)},footer:null,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(o.Z,{span:6}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsxs)(A.Z,{current:Q,size:"small",children:[(0,t.jsx)(Ft,{title:"\u9009\u62E9\u7C7B\u578B"},"type"),(0,t.jsx)(Ft,{title:"\u6784\u9020\u6570\u636E"},"type")]})}),(0,t.jsx)(o.Z,{span:6})]}),Tt(),(0,t.jsxs)("div",{style:{marginTop:24,textAlign:"center"},children:[Q===nt&&(0,t.jsxs)(L.ZP,{type:"primary",onClick:Ze,children:[(0,t.jsx)(je.Z,{})," \u5B8C\u6210"]}),Q>0&&(0,t.jsxs)(L.ZP,{style:{margin:"0 8px"},onClick:function(){return bt()},children:[(0,t.jsx)(ue.B,{type:"icon-shangyibu1"})," \u4E0A\u4E00\u6B65"]})]})]})})},Oe=(0,J.connect)(function(F){var l=F.construct,P=F.testcase,ae=F.loading;return{construct:l,loading:ae,testcase:P}})(Ke)},44046:function(Dt,Be,e){e.d(Be,{Z:function(){return ke}});var xe=e(97857),u=e.n(xe),ie=e(19632),j=e.n(ie),I=e(9783),G=e.n(I),Ee=e(15009),s=e.n(Ee),K=e(99289),p=e.n(K),R=e(5574),E=e.n(R),A=e(37594),g=e(44413),o=e(22763),Ue=e(7624),L=e(67294),J=e(4393),ue=e(94171),a=e(15106),n=e(85893),Y=function(i){return(0,n.jsx)(J.Z,{bordered:i.bordered,children:(0,n.jsx)(a.Z,u()({},i))})},M=(0,ue.connect)(function(O){var i=O.gconfig;return{gconfig:i}})(Y),st=e(65245),C=e(96074),He=e(69400),t=e(71230),Ce=e(15746),Se=e(71577),D=e(64240),Te=e(11475),pe=e(51042),We=e(84298),ge=e(20659),c=e(10981),y=e(19478),oe=function(i){var m=i.dispatch,V=i.testcase,$=i.caseId,Z=i.createMode,f=(0,L.useState)(!1),ye=E()(f,2),re=ye[0],Q=ye[1],nt=(0,L.useState)({}),ve=E()(nt,2),Ne=ve[0],X=ve[1],U=V.asserts,te=function(){var Ve=p()(s()().mark(function q(me){var Ge;return s()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,m({type:"testcase/deleteTestCaseAsserts",payload:{id:me.id}});case 2:Ge=Ie.sent,Ge&&m({type:"testcase/save",payload:{asserts:U.filter(function(Me){return Me.id!==me.id})}});case 4:case"end":return Ie.stop()}},q)}));return function(me){return Ve.apply(this,arguments)}}(),Re=function(q){var me=j()(U);me.splice(q.index,1),m({type:"testcase/save",payload:{asserts:me}})},Qe=[{title:"#",key:"index",render:function(q,me,Ge){return Ge+1}},{title:"\u6821\u9A8C\u5185\u5BB9",key:"name",dataIndex:"name"},{title:"\u7C7B\u578B",key:"assert_type",dataIndex:"assert_type",render:function(q){return y.Z.ASSERT_TYPE[q]}},{title:"\u9884\u671F\u7ED3\u679C",key:"expected",dataIndex:"expected",ellipse:!0},{title:"\u5B9E\u9645\u7ED3\u679C",key:"actually",dataIndex:"actually",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(q,me,Ge){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){Q(!0),X(u()(u()({},me),{},{index:Ge}))},children:"\u7F16\u8F91"}),(0,n.jsx)(C.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){He.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u65AD\u8A00\u6570\u636E\u5417?",icon:(0,n.jsx)(Te.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var Ie=p()(s()().mark(function gt(){return s()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(!Z){jt.next=4;break}Re(u()(u()({},me),{},{index:Ge})),jt.next=6;break;case 4:return jt.next=6,te(me);case 6:case"end":return jt.stop()}},gt)}));function Me(){return Ie.apply(this,arguments)}return Me}()})},children:"\u5220\u9664"})]})}}],Xe=function(){var Ve=p()(s()().mark(function q(me){var Ge,ut,Ie,Me,gt,ot;return s()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(Ge=u()({case_id:$},me),!Z){Ze.next=8;break}return Ne.index!==void 0?(Ie=j()(U),Ie.splice(Ne.index,1,u()({},Ge))):Ie=[].concat(j()(U),[u()({},Ge)]),Ze.next=5,m({type:"testcase/save",payload:{asserts:Ie}});case 5:Q(!1),Ze.next=29;break;case 8:if(!Ne.id){Ze.next=22;break}return Ze.next=11,m({type:"testcase/updateTestCaseAsserts",payload:u()(u()({},Ge),{},{id:Ne.id})});case 11:if(ut=Ze.sent,!c.Z.response(ut,!0)){Ze.next=20;break}return Q(!1),Me=j()(U),gt=Me.findIndex(function(Ct){return Ne.id===Ct.id}),ot=Me[gt],Me.splice(gt,1,u()(u()({},ot),ut.data)),Ze.next=20,m({type:"testcase/save",payload:{asserts:Me}});case 20:Ze.next=29;break;case 22:return Ze.next=24,m({type:"testcase/insertTestCaseAsserts",payload:Ge});case 24:if(ut=Ze.sent,!c.Z.response(ut,!0)){Ze.next=29;break}return Q(!1),Ze.next=29,m({type:"testcase/save",payload:{asserts:[].concat(j()(U),[ut.data])}});case 29:case"end":return Ze.stop()}},q)}));return function(me){return Ve.apply(this,arguments)}}();return(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsxs)(Ce.Z,{span:24,children:[(0,n.jsx)(We.Z,{open:re,fields:ge.Z.CaseAsserts,title:"\u7528\u4F8B\u65AD\u8A00",left:6,right:18,onFinish:Xe,onCancel:function(){return Q(!1)},record:Ne}),(0,n.jsx)(t.Z,{style:{marginBottom:16},children:(0,n.jsx)(Ce.Z,{span:8,children:(0,n.jsxs)(Se.ZP,{type:"primary",onClick:function(){Q(!0),X({})},children:[(0,n.jsx)(pe.Z,{}),"\u6DFB\u52A0\u65AD\u8A00"]})})}),(0,n.jsx)(D.Z,{columns:Qe,dataSource:U,rowKey:function(q){return q.id},locale:{emptyText:(0,n.jsx)(o.Z,{height:150})}})]})})},r=(0,ue.connect)(function(O){var i=O.testcase,m=O.loading;return{testcase:i,loading:m}})(oe),de=e(99138),je=e(26194),be=function(i){var m=i.caseId,V=i.testcase,$=i.loading,Z=i.dispatch,f=i.currentEnv,ye=i.createMode,re=ye===void 0?!1:ye,Q=V.testData,nt=(0,L.useState)({current:1,total:0,pageSize:5}),ve=E()(nt,2),Ne=ve[0],X=ve[1],U=(0,L.useState)([]),te=E()(U,2),Re=te[0],Qe=te[1],Xe=(0,L.useState)({}),Ve=E()(Xe,2),q=Ve[0],me=Ve[1],Ge=(0,L.useState)(!1),ut=E()(Ge,2),Ie=ut[0],Me=ut[1],gt=(0,L.useState)(null),ot=E()(gt,2),jt=ot[0],Ze=ot[1];(0,L.useEffect)(function(){var se=parseInt(f,10),z=Q[se];z?(Qe(j()(z)),X(u()(u()({},Ne),{},{current:1,total:z.length}))):(Qe([]),X(u()(u()({},Ne),{},{current:1,total:0})))},[f,Q]);var Ct=function(){var se=p()(s()().mark(function z(H){var d,h;return s()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return d=u()({},Q),h=d[parseInt(f,10)],d[parseInt(f,10)]=h.filter(function(De){return H.name!==De.name}),ne.next=5,Z({type:"testcase/save",payload:{testData:d}});case 5:case"end":return ne.stop()}},z)}));return function(H){return se.apply(this,arguments)}}(),Tt=function(){var se=p()(s()().mark(function z(H){var d,h,v;return s()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,Z({type:"testcase/deleteTestcaseData",payload:{id:H}});case 2:if(d=De.sent,!d){De.next=9;break}return h=u()({},Q),v=h[parseInt(f,10)],h[parseInt(f,10)]=v.filter(function(mt){return mt.id!==H}),De.next=9,Z({type:"testcase/save",payload:{testData:h}});case 9:case"end":return De.stop()}},z)}));return function(H){return se.apply(this,arguments)}}(),bt=[{title:"#",dataIndex:"id",key:"id"},{title:"\u573A\u666F\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u6D4B\u8BD5\u6570\u636E",dataIndex:"json_data",key:"json_data",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(z,H,d){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){me(u()(u()({},H),{},{index:d})),Me(!0)},children:"\u7F16\u8F91"}),(0,n.jsx)(C.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){He.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u6D4B\u8BD5\u6570\u636E\u5417?",icon:(0,n.jsx)(Te.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var v=p()(s()().mark(function De(){return s()().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(!re){lt.next=5;break}return lt.next=3,Ct(H);case 3:lt.next=7;break;case 5:return lt.next=7,Tt(H.id);case 7:case"end":return lt.stop()}},De)}));function ne(){return v.apply(this,arguments)}return ne}()})},children:"\u5220\u9664"})]})}}],ht=function(){var se=p()(s()().mark(function z(H){var d,h;return s()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:d=u()({},Q),h=u()({env:f},H),q.index!==void 0?d[parseInt(f,10)].splice(q.index,1,h):d[parseInt(f,10)]===void 0?d[parseInt(f,10)]=[h]:d[parseInt(f,10)].push(h),Z({type:"testcase/save",payload:{testData:d}}),Me(!1);case 5:case"end":return ne.stop()}},z)}));return function(H){return se.apply(this,arguments)}}(),he=function(){var se=p()(s()().mark(function z(H){var d;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(q.id){v.next=6;break}return v.next=3,Z({type:"testcase/insertTestcaseData",payload:u()({case_id:m,env:f},H)});case 3:d=v.sent,v.next=9;break;case 6:return v.next=8,Z({type:"testcase/updateTestcaseData",payload:u()({id:q.id,case_id:m,env:f},H)});case 8:d=v.sent;case 9:d&&Me(!1);case 10:case"end":return v.stop()}},z)}));return function(H){return se.apply(this,arguments)}}(),Je=[{name:"name",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:q.name},{name:"json_data",label:"JSON\u6570\u636E",required:!0,placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:q.name,component:(0,n.jsx)(je.Z,{height:200,setEditor:Ze,theme:"material-one-dark"})}];return(0,n.jsxs)(t.Z,{gutter:8,children:[(0,n.jsx)(We.Z,{title:"\u6D4B\u8BD5\u6570\u636E",record:q,onCancel:function(){Me(!1)},left:4,right:20,width:650,open:Ie,onFinish:re?ht:he,fields:Je,children:(0,n.jsx)(de.Z,{closable:!0,type:"info",style:{marginBottom:12},message:"\u6570\u636E\u7BA1\u7406\u63A5\u53D7\u4E00\u4E32key-value\u7684\u6570\u636E\uFF0C\u4F9B\u5927\u5BB6\u5728case\u91CC\u9762\u4F7F\u7528\u8FD9\u4E9B\u53D8\u91CF\uFF0C\u7528${\u53D8\u91CF}\u7684\u65B9\u5F0F\u3002",showIcon:!0})}),(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(J.Z,{bordered:!1,children:[(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsx)(Ce.Z,{span:6,children:(0,n.jsxs)(Se.ZP,{type:"primary",onClick:function(){Me(!0),me({})},children:[(0,n.jsx)(pe.Z,{})," \u6DFB\u52A0\u6570\u636E"]})})}),(0,n.jsx)(t.Z,{gutter:8,style:{marginTop:12},children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsx)(D.Z,{columns:bt,pagination:Ne,rowKey:function(z){return z.id},loading:$.effects["testcase/insertTestcaseData"]||$.effects["testcase/updateTestcaseData"]||$.effects["testcase/deleteTestcaseData"],dataSource:Re,locale:{emptyText:(0,n.jsx)(o.Z,{height:"150"})},onChange:function(z){return X(u()(u()({},Ne),{},{current:z.current}))}})})})]})})]})},le=(0,ue.connect)(function(O){var i=O.testcase,m=O.loading;return{testcase:i,loading:m}})(be),ft=e(13769),Ae=e.n(ft),T=e(34041),_=e(58131),$e=e(96365),Ye=e(86738),Pe=e(31484),_e=["index"],qe=["title","editable","children","dataIndex","name","record","handleSave","toggleEdit"],we=T.Z.Option,ze=L.createContext(null),yt=function(i){var m=i.index,V=Ae()(i,_e),$=_.Z.useForm(),Z=E()($,1),f=Z[0];return(0,n.jsx)(_.Z,{form:f,component:!1,children:(0,n.jsx)(ze.Provider,{value:f,children:(0,n.jsx)("tr",u()({},V))})})},rt=function(O){var i=O.columns,m=O.dataSource,V=O.setDataSource,$=(0,L.useState)(null),Z=E()($,2),f=Z[0],ye=Z[1],re=function(U){var te=U.title,Re=U.editable,Qe=U.children,Xe=U.dataIndex,Ve=U.name,q=U.record,me=U.handleSave,Ge=U.toggleEdit,ut=Ae()(U,qe),Ie=(0,L.useContext)(ze),Me=(0,L.useRef)(null),gt=(0,L.useState)({}),ot=E()(gt,2),jt=ot[0],Ze=ot[1];(0,L.useEffect)(function(){f!=null&&Ie.setFieldsValue(m[f])},[f]);var Ct=function(Je,se,z){var H=j()(m),d=H.findIndex(function(v){return Je.key===v.key}),h=H[d];H[d]=u()(u()({},h),{},G()({},se,z)),V(H)},Tt=function(Je,se,z,H,d){return se==="source"?(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:!0,message:"".concat(Je," is required.")}],children:(0,n.jsxs)(T.Z,{placeholder:"\u9009\u62E9\u6570\u636E\u6765\u6E90",style:{width:"90%"},ref:H,onSelect:function(v){Ct(z,se,v)},onBlur:d,children:[(0,n.jsx)(we,{value:0,children:"Response: \u6B63\u5219"}),(0,n.jsx)(we,{value:1,children:"Response: JSONPath"}),(0,n.jsx)(we,{value:2,children:"Header: K/V"}),(0,n.jsx)(we,{value:3,children:"Cookie: K/V"}),(0,n.jsx)(we,{value:4,children:"\u54CD\u5E94\u72B6\u6001\u7801"}),(0,n.jsx)(we,{value:5,children:"Body: \u6B63\u5219"}),(0,n.jsx)(we,{value:6,children:"Body: JSONPath"}),(0,n.jsx)(we,{value:7,children:"Request Header: K/V"})]})}):se==="expression"?(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:z.source!==4,message:"".concat(Je," is required.")}],children:(0,n.jsx)($e.Z,{ref:H,onPressEnter:d,disabled:z.source===4,onBlur:d,placeholder:z.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"})}):se==="match_index"?(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:z.source!==4&&z.source!==1&&z.source!==6,message:"".concat(Je," is required.")}],children:(0,n.jsx)($e.Z,{ref:H,onPressEnter:d,disabled:z.source===4||z.source===1||z.source===6,onBlur:d,placeholder:z.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u5339\u914D\u9879"})}):(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:z.source!==4,message:"".concat(Je," is required.")}],children:(0,n.jsx)($e.Z,{ref:H,onPressEnter:d,onBlur:d,placeholder:"\u8BF7\u8F93\u5165".concat(Je)})})},bt=function(){var he=p()(s()().mark(function Je(){var se;return s()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,Ie.validateFields();case 3:se=H.sent,ye(null),Ie.setFieldsValue(q),me(u()(u()({},q),se)),H.next=12;break;case 9:H.prev=9,H.t0=H.catch(0),console.log("Save failed:",H.t0);case 12:case"end":return H.stop()}},Je,null,[[0,9]])}));return function(){return he.apply(this,arguments)}}(),ht=Qe;return Re&&(ht=f===q.key?Tt(Ve,Xe,q,Me,bt):(0,n.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},children:Qe})),(0,n.jsx)("td",u()(u()({},ut),{},{children:ht}))},Q=function(U){var te=j()(m),Re=te.findIndex(function(Xe){return U.key===Xe.key}),Qe=te[Re];te.splice(Re,1,u()(u()({},Qe),U)),te.filter(function(Xe){return Xe.name}).length===te.length&&te.push({key:m.length===0?0:m[m.length-1].key+1,source:1}),V(te)},nt=function(U){var te=j()(m);V(te.filter(function(Re){return Re.key!==U}).map(function(Re,Qe){return u()(u()({},Re),{},{key:Qe})}))},ve=i.map(function(X){return X.editable?u()(u()({},X),{},{onCell:function(te){return{record:te,editable:X.editable,dataIndex:X.dataIndex,title:X.title,name:X.name,handleSave:Q}}}):X});ve=[].concat(j()(ve),[{title:"\u64CD\u4F5C",render:function(U,te){return m.length>1?(0,n.jsx)(Ye.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:function(){nt(te.key)},children:(0,n.jsx)(Pe.Z,{twoToneColor:"red",onClick:function(Qe){Qe.stopPropagation()}})}):null}}]);var Ne={body:{row:yt,cell:re}};return(0,n.jsx)(D.Z,{onRow:function(U){return{onClick:function(Re){ye(U.key)}}},components:Ne,rowClassName:"editable-row",dataSource:m,columns:ve,pagination:!1})},vt=e(63783),Et={JSONPATH_TITLE:`JSON\u683C\u5F0F\u7684\u89E3\u6790\u540C\u6837\u652F\u6301\u6570\u7EC4\u4E2D\u6307\u5B9A\u5BF9\u8C61\uFF0C\u5982data.itemlist[0]\uFF1B\u652F\u6301\u63D0\u53D6\u6570\u636E\u4E2D\u968F\u673A\u503Cdata.itemlist[random]\uFF1B\u540C\u65F6\u652F\u6301\u63D0\u53D6\u90E8\u5206\u503C\u7EC4\u5408\u4E3A\u65B0\u6570\u7EC4\uFF0Cdata.itemlist[0-99].id\u5BFC\u51FA\u524D100\u4E2Aid\uFF0Cdata.itemlist[all].id\u5373\u5BFC\u51FA\u5168\u90E8id\u3002\u82E5\u60F3\u5C06\u6570\u7EC4\u5185\u7684\u503C\u8FDB\u884C\u904D\u5386\u4F7F\u7528\uFF0C\u8BF7\u7ED3\u5408\u6570\u636E\u5BFC\u51FA\u8282\u70B9\u914D\u5408\u4F7F\u7528\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u53EF\u6307\u5B9A\u5339\u914D\u9879.
                    \u5E38\u89C1\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u4F7F\u7528\u5230\u7684\u5B57\u7B26\u8303\u56F4\u793A\u4F8B\u5982\u4E0B:
                    \u82F1\u6587\u5B57\u6BCD:[a-zA-Z]
                    \u6570\u5B57:[0-9]
                    \u4E2D\u6587\u5B57\u7B26\u8303\u56F4:[\u4E00-\u9FA5]
                    \u4E2D\u6587\u3001\u82F1\u6587\u3001\u6570\u5B57\uFF1A[\u4E00-\u9FA5a-zA-Z0-9]
                    \u6307\u5B9A\u7B26\u5408\u6761\u4EF6\u7684\u5B57\u7B26\u4E2A\u6570\uFF1A[a-zA-Z]{2,4} \u8868\u793A2-4\u4E2A\u5B57\u7B26\uFF1B{2}\u8868\u793A\u5B57\u7B26\u4E2A\u6570\u4E3A2\u4E2A\u3002
                    \u6CE8\u610F\uFF1A\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528*,\u5426\u52190\u4E2A\u4E5F\u4F1A\u5339\u914D\u5230`},Zt={0:"Response: \u6B63\u5219",1:"Response: JSONPath",2:"Header: K/V",3:"Cookie: K/V",4:"\u54CD\u5E94\u72B6\u6001\u7801",5:"Body: \u6B63\u5219",6:"Body: JSONPath",7:"Request Header: K/V"},Bt=function(O){var i=O.dispatch,m=O.testcase,V=O.caseId,$=O.createMode,Z=m.outParameters,f=function(Q){i({type:"testcase/save",payload:{outParameters:Q}})},ye=[{title:"\u51FA\u53C2\u540D",dataIndex:"name",key:"name",name:"\u51FA\u53C2\u540D",width:"20%",editable:!0,render:function(Q){return Q||"\u8BF7\u8F93\u5165\u51FA\u53C2\u540D"}},{title:"\u6765\u6E90",name:"\u6765\u6E90",dataIndex:"source",key:"source",width:"25%",editable:!0,render:function(Q){return Q!==void 0?Zt[Q]:"\u8BF7\u9009\u62E9\u6765\u6E90"}},{name:"\u89E3\u6790\u8868\u8FBE\u5F0F",title:(0,n.jsxs)("span",{children:["\u89E3\u6790\u8868\u8FBE\u5F0F ",(0,n.jsx)(g.Z,{icon:(0,n.jsx)(vt.Z,{}),title:Et.JSONPATH_TITLE})]}),dataIndex:"expression",key:"expression",editable:!0,render:function(Q,nt){return nt.source!==4?Q||"\u8BF7\u8F93\u5165\u89E3\u6790\u8868\u8FBE\u5F0F":"\u65E0\u9700\u586B\u5199"}},{title:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",name:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",dataIndex:"match_index",editable:!0,render:function(Q,nt){return nt.source!==4&&nt.source!==1&&nt.source!==6?Q||"\u8BF7\u8F93\u5165\u5339\u914D\u9879":"\u65E0\u9700\u586B\u5199"}}];return(0,n.jsx)(rt,{columns:ye,dataSource:Z,setDataSource:f})},it=e(93980),et=e(25514),xt=it.Z.TabPane,b=function(i){var m=i.open,V=i.gconfig,$=i.variables,Z=i.onCancel,f=[{title:"\u53D8\u91CF\u540D",dataIndex:"name",key:"name",render:function(Q){return(0,n.jsx)(et.Z.Text,{copyable:!0,children:Q})}}],ye=[].concat(f,[{title:"\u6765\u6E90",dataIndex:"stepName",key:"stepName"}]);return(0,n.jsx)(He.Z,{title:"\u53D8\u91CF\u5217\u8868",open:m,width:500,footer:null,onCancel:Z,children:(0,n.jsxs)(it.Z,{children:[(0,n.jsx)(xt,{tab:"\u5168\u5C40\u53D8\u91CF",children:(0,n.jsx)(D.Z,{columns:f,dataSource:V,size:"small"})},"global"),(0,n.jsx)(xt,{tab:"\u7528\u4F8B\u53D8\u91CF",children:(0,n.jsx)(D.Z,{columns:ye,dataSource:$,size:"small"})},"case")]})})},N=b,S=e(89609),ee=e(4713),w=e(59697),ct=e(65987),ce=e(60219),Ft=e(84552),Ke=e(12350),Oe=e(51904),F=e(72269),l=e(93531),P=e(33100),ae=e(53575),fe=it.Z.TabPane,tt=function(i){var m=i.dispatch,V=i.testcase,$=i.case_id,Z=i.setSuffix,f=i.body,ye=i.setBody,re=i.formData,Q=i.setFormData,nt=i.gconfig,ve=i.onSubmit,Ne=i.form,X=i.createMode,U=X===void 0?!1:X,te=i.headers,Re=i.setHeaders,Qe=i.bodyType,Xe=i.setBodyType,Ve=i.loading,q=V.preConstructor,me=V.postConstructor,Ge=V.activeKey,ut=V.constructors_case,Ie=V.envActiveKey,Me=V.asserts,gt=V.caseInfo,ot=nt.envList,jt=(0,L.useState)(!1),Ze=E()(jt,2),Ct=Ze[0],Tt=Ze[1],bt=(0,L.useState)([]),ht=E()(bt,2),he=ht[0],Je=ht[1],se=(0,L.useState)([]),z=E()(se,2),H=z[0],d=z[1],h=(0,L.useState)(localStorage.getItem("case_study")===null),v=E()(h,2),ne=v[0],De=v[1],mt=(0,L.useRef)(null),lt=(0,L.useRef)(null),At=(0,L.useRef)(null),Ot=(0,L.useRef)(null),Pt=(0,L.useRef)(null),It=(0,L.useRef)(null),Ut=function(){var B=p()(s()().mark(function x(W){var Fe,k;return s()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Fe=W.map(function(pt){return{case_id:pt.case_id,step_name:pt.name}}),Le.next=3,(0,ee.Sb)(Fe);case 3:k=Le.sent,c.Z.response(k)&&d(Object.keys(k.data).map(function(pt){return k.data[pt]}));case 5:case"end":return Le.stop()}},x)}));return function(W){return B.apply(this,arguments)}}(),Mt=[{title:"\u6570\u636E\u7BA1\u7406",placement:"right",description:"\u6570\u636E\u7BA1\u7406\u6A21\u5757\uFF0C\u4EE5\u6570\u636E\u9A71\u52A8\u7684\u65B9\u5F0F\u6279\u91CF\u8BF7\u6C42\u63A5\u53E3\uFF0C\u89E3\u51B3\u91CD\u590D\u7F16\u5199\u573A\u666F\u7684\u70E6\u607C~\u{1F47B}",cover:(0,n.jsx)(Ke.Z,{width:"100%",style:{height:200},src:"/data_driven.jpeg"}),target:function(){return mt.current}},{title:"\u524D\u7F6E\u6B65\u9AA4",placement:"right",description:"\u5728\u524D\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u9020\u4E00\u5207\u4F60\u9700\u8981\u7684\u6570\u636E\uFF0C\u5305\u62EC\u4F46\u4E0D\u9650\u4E8EDB/Redis\u7B49\uFF0C\u5E76\u80FD\u5C06\u6570\u636E\u4F20\u9012\u4E0B\u53BB\u{1F440}",cover:(0,n.jsx)(Ke.Z,{width:"100%",style:{height:200},src:"/pre.svg"}),target:function(){return lt.current}},{title:"\u63A5\u53E3\u8BF7\u6C42",placement:"right",description:"\u5728\u63A5\u53E3\u8BF7\u6C42\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u5EFAHTTP/DUBBO/GRPC\u8FD93\u7C7B\u8BF7\u6C42\uFF0C\u5982\u679C\u9047\u5230\u6709\u53D8\u91CF\u9700\u8981\u586B\u5199\uFF0C\u53EF\u4EE5\u6309\u4E0B\u5FEB\u6377\u952E\u300E$\u300F\u5F39\u51FA\u53D8\u91CF\u83DC\u5355\u54E6~\u{1F42C}",cover:(0,n.jsx)(Ke.Z,{width:"100%",style:{height:200},src:"/api.svg"}),target:function(){return Ot.current}},{title:"\u51FA\u53C2\u63D0\u53D6",placement:"left",description:"\u5728\u51FA\u53C2\u63D0\u53D6\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u63D0\u53D6\u4F60\u5728\u4E0B\u4E00\u4E2A\u6B65\u9AA4\u4E2D\u9700\u8981\u7684\u6570\u636E, \u6BD4\u5982\u4F60\u53EF\u4EE5\u63D0\u53D6\u767B\u5F55\u540E\u7684token\uFF0C\u7528\u4E8E\u63A5\u4E0B\u6765\u7684\u64CD\u4F5C\uFF01\u51FA\u53C2\u63D0\u53D6\u4E3B\u8981\u652F\u6301\u6B63\u5219\u548CJSONPath2\u79CD\u65B9\u5F0F\uFF0C\u5982\u679C\u8FD8\u4E0D\u719F\u6089\u7684\u8BDD\uFF0C\u5EFA\u8BAE\u53BB\u641C\u7D22\u5B66\u4E60\u4E00\u4E0B\u54E6~\u{1F47D}",cover:(0,n.jsx)(Ke.Z,{width:"100%",style:{height:200},src:"/out.svg"}),target:function(){return It.current}},{title:"\u65AD\u8A00",placement:"left",description:"\u5728\u65AD\u8A00\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u5BF9\u4F60\u672C\u6B21\u6D4B\u8BD5\u7684\u6570\u636E\u8FDB\u884C\u6821\u9A8C\uFF0C\u4EE5\u4FBF\u4E8E\u540E\u7EED\u573A\u666F\u81EA\u52A8\u6267\u884C\u65F6\u80FD\u68C0\u6D4B\u51FA\u5F02\u5E38\uFF0C\u65AD\u8A00\u5F88\u91CD\u8981\uFF0C\u8BB0\u5F97\u8981\u586B\u54E6\uFF01\u{1F383}",cover:(0,n.jsx)(Ke.Z,{width:"100%",style:{height:200},src:"/assert.svg"}),target:function(){return Pt.current}},{title:"\u540E\u7F6E\u6B65\u9AA4",placement:"left",description:"\u5728\u540E\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u505A\u4E00\u4E9B\u6E05\u7406\u5DE5\u4F5C\uFF0C\u6BD4\u5982\u5220\u9664\u4F60\u521B\u5EFA\u7684\u6570\u636E\u7B49\uFF0C\u7528\u6CD5\u4E0E\u524D\u7F6E\u6B65\u9AA4\u7C7B\u4F3C~\u{1F680}",cover:(0,n.jsx)(Ke.Z,{width:"100%",style:{height:200},src:"/clean.svg"}),target:function(){return At.current}}];(0,Ft.Z)(["shift.4"],function(){Ge!=="4"&&window.location.href.indexOf("/apiTest/testcase/")>-1&&window.location.href.endsWith("/".concat($))&&Tt(!0)},{exactMatch:!0,useCapture:!0});var Ht=function(){var B=p()(s()().mark(function x(){var W;return s()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,S.Z7)({page:1,size:500});case 2:W=k.sent,c.Z.response(W)&&Je(W.data.map(function(at){return{name:"${"+at.key+"}"}}));case 4:case"end":return k.stop()}},x)}));return function(){return B.apply(this,arguments)}}();(0,L.useEffect)(function(){Ht()},[]),(0,L.useEffect)(function(){Ut(q)},[q]);var Rt=function(){m({type:"testcase/save",payload:{constructorModal:!0,testCaseConstructorData:{public:!0,enable:!0},currentStep:0,constructRecord:{}}}),m({type:"construct/save",payload:{currentStep:0}})},$t=function(){var B=p()(s()().mark(function x(W){var Fe,k,at,Le=arguments;return s()().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return Fe=Le.length>1&&Le[1]!==void 0?Le[1]:!1,St.next=3,m({type:"construct/delete",payload:{id:W.id}});case 3:k=St.sent,k&&(Fe?at=me.filter(function(dt){return dt.id!==W.id}):at=q.filter(function(dt){return dt.id!==W.id}),m({type:"testcase/save",payload:G()({},Fe?"postConstructor":"preConstructor",at)}));case 5:case"end":return St.stop()}},x)}));return function(W){return B.apply(this,arguments)}}(),zt=function(){var B=p()(s()().mark(function x(W,Fe){var k;return s()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:k=j()(Fe?me:q),k.splice(W.index,1),m({type:"testcase/save",payload:G()({},Fe?"postConstructor":"preConstructor",k.map(function(pt,St){return u()(u()({},pt),{},{index:St})}))});case 3:case"end":return Le.stop()}},x)}));return function(W,Fe){return B.apply(this,arguments)}}(),kt=function(x,W){return x.type===4?{body:W.body,headers:w.Z.parseHeaders(W.headers),base_path:W.base_path,url:W.url,request_method:W.request_method,body_type:W.body_type}:W},Kt=function(x){var W=JSON.parse(x.constructor_json);m({type:"construct/save",payload:{currentStep:1,testCaseConstructorData:u()(u()({},x),kt(x,W)),constructorType:x.type}}),m({type:"testcase/save",payload:{constructorModal:!0,constructRecord:x}})},Gt=function(){var B=p()(s()().mark(function x(W,Fe){var k,at,Le,pt=arguments;return s()().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(k=pt.length>2&&pt[2]!==void 0?pt[2]:!1,Le=j()(k?me:q),!U){dt.next=6;break}at=!0,dt.next=9;break;case 6:return dt.next=8,m({type:"construct/update",payload:u()(u()({},W),{},{enable:Fe})});case 8:at=dt.sent;case 9:at&&(U?Le.forEach(function(Lt,Jt){Jt===W.index&&(Lt.enable=Fe)}):Le.forEach(function(Lt){Lt.id===W.id&&(Lt.enable=Fe)}),m({type:"testcase/save",payload:G()({},k?"postConstructor":"preConstructor",Le)}));case 10:case"end":return dt.stop()}},x)}));return function(W,Fe){return B.apply(this,arguments)}}(),Nt=function(x){var W=JSON.parse(x.constructor_json);if(x.type===0){var Fe=ut[W.case_id];return Fe?(0,n.jsxs)("div",{children:["\u7528\u4F8B:"," ",(0,n.jsx)("a",{href:"/#/apiTest/testcase/".concat(Fe.directory_id,"/").concat(Fe.id),rel:"noreferrer",children:Fe.name})]}):null}if(x.type===1)return(0,n.jsx)("code",{children:W.sql});if(x.type===2)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:W.command})});if(x.type===3)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:W.command})})},Wt=function(x){var W=x.number,Fe=x.bgColor,k=x.color,at=x.style;return W===0?null:(0,n.jsx)("div",{style:u()({display:"inline-block",marginLeft:2,textAlign:"center",width:24,borderRadius:10,background:Fe,color:k},at),children:W})},Vt=[{title:"\u540D\u79F0",key:"name",dataIndex:"name",render:function(x,W,Fe){return(0,n.jsx)("a",{onClick:function(){Kt(u()(u()({},W),{},{tempIndex:Fe}))},children:x})},className:"drag-visible"},{title:"\u7C7B\u578B",key:"type",dataIndex:"type",render:function(x){return(0,n.jsx)(Oe.Z,{color:y.Z.CASE_CONSTRUCTOR_COLOR[x],children:y.Z.CASE_CONSTRUCTOR[x]})},className:"drag-visible"},{title:"\u72B6\u6001",key:"enable",dataIndex:"enable",className:"drag-visible",render:function(x,W){return(0,n.jsx)(F.Z,{defaultChecked:W.enable,onChange:function(){var Fe=p()(s()().mark(function k(at){return s()().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,Gt(W,at);case 2:case"end":return pt.stop()}},k)}));return function(k){return Fe.apply(this,arguments)}}()})}},{title:"\u8FD4\u56DE\u503C",key:"value",dataIndex:"value",className:"drag-visible"},{title:"\u64CD\u4F5C",key:"ops",className:"drag-visible",render:function(x,W,Fe){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){Kt(u()(u()({},W),{},{tempIndex:Fe}))},children:(0,n.jsx)(ct.Z,{})}),(0,n.jsx)("a",{style:{marginLeft:8},onClick:function(){He.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6570\u636E\u6784\u9020\u5668\u5417?",icon:(0,n.jsx)(Te.Z,{}),content:"\u5982\u679C\u53EA\u662F\u6682\u65F6\u4E0D\u5F00\u542F\uFF0C\u53EF\u4EE5\u5148\u6682\u505C\u5B83~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var at=p()(s()().mark(function pt(){return s()().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(!U){dt.next=5;break}return dt.next=3,zt(W);case 3:dt.next=7;break;case 5:return dt.next=7,$t(W);case 7:case"end":return dt.stop()}},pt)}));function Le(){return at.apply(this,arguments)}return Le}()})},children:(0,n.jsx)(Pe.Z,{twoToneColor:"red"})})]})}}];return(0,n.jsxs)(t.Z,{gutter:8,style:{marginTop:36,minHeight:500},children:[(0,n.jsx)(N,{open:Ct,gconfig:he,variables:H,onCancel:function(){return Tt(!1)}}),(0,n.jsx)(l.Z,{open:ne,onClose:function(){localStorage.setItem("case_study","done"),De(!1)},steps:Mt}),(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(it.Z,{activeKey:Ge,onChange:function(x){m({type:"testcase/save",payload:{activeKey:x}}),Z(x==="6"),x==="1"&&ot.length>0&&m({type:"testcase/save",payload:{envActiveKey:ot[0].id.toString()}})},tabBarExtraContent:U?null:(0,n.jsxs)(Se.ZP,{style:{marginRight:8},onClick:function(){ve(!1)},children:[(0,n.jsx)(ce.Z,{}),"\u4FDD\u5B58"]}),children:[(0,n.jsx)(fe,{tab:(0,n.jsxs)("span",{ref:mt,children:[(0,n.jsx)(A.B,{type:"icon-shujuqudong1"}),"\u6570\u636E\u7BA1\u7406"," ",(0,n.jsx)(g.Z,{onClick:function(){window.open("".concat(y.Z.DOCUMENT_URL,"/%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/%E6%A6%82%E5%BF%B5/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"))},icon:(0,n.jsx)(vt.Z,{}),title:"\u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u5BF9\u591A\u5957\u73AF\u5883\u7684\u6D4B\u8BD5\u6570\u636E\u8FDB\u884C\u7BA1\u7406\uFF0C\u4ECE\u800C\u8FBE\u5230\u6570\u636E\u9A71\u52A8\u7684\u76EE\u7684~\u70B9\u51FB\u6B64\u6309\u94AE\u67E5\u770B\u8BE6\u7EC6\u6587\u6863\u3002"})]}),children:ot.length>0?(0,n.jsx)(it.Z,{tabPosition:"left",activeKey:Ie,onChange:function(x){m({type:"testcase/save",payload:{envActiveKey:x}})},children:ot.map(function(B){return(0,n.jsx)(fe,{tab:B.name,children:(0,n.jsx)(le,{caseId:$,currentEnv:Ie,createMode:U})},B.id)})}):(0,n.jsx)(Ue.Z,{height:280,desc:(0,n.jsxs)("span",{children:["\u6CA1\u6709\u4EFB\u4F55\u73AF\u5883\u4FE1\u606F, ",(0,n.jsx)("a",{href:"/#/config/environment",children:"\u53BB\u6DFB\u52A0"})]})})},"1"),(0,n.jsx)(fe,{tab:(0,n.jsxs)("div",{ref:lt,children:[(0,n.jsx)(A.B,{type:"icon-DependencyGraph_16x"}),"\u524D\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:q.length,bgColor:"rgb(237, 242, 251)",color:"rgb(29, 98, 203)"})]}),children:q.length===0?(0,n.jsx)(o.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u524D\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u5FEB ",(0,n.jsx)("a",{onClick:Rt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(Ce.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(Se.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Rt,children:[(0,n.jsx)(pe.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(st.Z,{columns:Vt,dataSource:q,setDataSource:function(x){m({type:"testcase/save",payload:{preConstructor:x}})},loading:Ve.effects["construct/delete"]||Ve.effects["construct/update"],dragCallback:function(){var B=p()(s()().mark(function x(W){return s()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!U){k.next=2;break}return k.abrupt("return",!0);case 2:return k.next=4,m({type:"construct/orderConstructor",payload:W.map(function(at,Le){return{id:at.id,index:Le}})});case 4:return k.abrupt("return",k.sent);case 5:case"end":return k.stop()}},x)}));return function(x){return B.apply(this,arguments)}}()})]}),(0,n.jsx)(Ce.Z,{span:8,children:(0,n.jsx)(J.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:q.filter(function(B){return B.enable}).length===0?(0,n.jsx)(Ue.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u524D\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(P.Z,{children:q.map(function(B,x){return B.enable?(0,n.jsxs)(P.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(ae.Z,{count:x+1,style:{backgroundColor:"#a6d3ff"}},x)," ","\u540D\u79F0:"," ",B.type===0?(0,n.jsx)("a",{children:B.name},B.name):B.name]},x),Nt(B)]},x):null})})})})]})},"2"),(0,n.jsx)(fe,{tab:(0,n.jsxs)("span",{ref:Ot,children:[(0,n.jsx)(A.B,{type:"icon-qingqiu"}),"\u63A5\u53E3\u8BF7\u6C42"]}),children:(0,n.jsx)(t.Z,{gutter:[8,8],children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsx)(M,{form:Ne,body:f,setBody:ye,headers:te,formData:re,setFormData:Q,caseInfo:gt,setHeaders:Re,bodyType:Qe,setBodyType:Xe,bordered:!1,save:ve})})})},"3"),(0,n.jsx)(fe,{tab:(0,n.jsxs)("span",{ref:It,children:[(0,n.jsx)(A.B,{type:"icon-canshu2"}),"\u51FA\u53C2\u63D0\u53D6"," ",(0,n.jsx)(g.Z,{icon:(0,n.jsx)(vt.Z,{}),title:"\u901A\u8FC7\u7BA1\u7406\u8BF7\u6C42\u4EA7\u751F\u7684\u53C2\u6570\uFF0C\u5E2E\u52A9\u6211\u4EEC\u66F4\u597D\u5730\u6539\u5584\u3010\u65AD\u8A00\u3011"})]}),children:(0,n.jsx)(Bt,{caseId:$,createMode:U,dispatch:m,testcase:V})},"4"),(0,n.jsx)(fe,{tab:(0,n.jsxs)("div",{ref:Pt,children:[(0,n.jsx)(A.B,{type:"icon-duanyan"}),"\u65AD\u8A00"," ",(0,n.jsx)(Wt,{number:Me.length,bgColor:"rgb(233, 249, 245)",color:"rgb(40, 195, 151)"})]}),children:(0,n.jsx)(r,{asserts:Me,caseId:$,createMode:U})},"5"),(0,n.jsx)(fe,{tab:(0,n.jsxs)("div",{ref:At,children:[(0,n.jsx)(A.B,{type:"icon-qingliwuliuliang"}),"\u540E\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:me.length,bgColor:"rgb(255, 238, 239)",color:"rgb(255, 87, 95)"})]}),children:me.length===0?(0,n.jsx)(o.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u540E\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u7D27 ",(0,n.jsx)("a",{onClick:Rt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(Ce.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(Se.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Rt,children:[(0,n.jsx)(pe.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(st.Z,{columns:Vt,dataSource:me,setDataSource:function(x){m({type:"testcase/save",payload:{postConstructor:x}})},loading:Ve.effects["construct/delete"]||Ve.effects["construct/update"],dragCallback:function(){var B=p()(s()().mark(function x(W){return s()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!U){k.next=2;break}return k.abrupt("return",!0);case 2:return k.next=4,m({type:"construct/orderConstructor",payload:W.map(function(at,Le){return{id:at.id,index:Le}})});case 4:return k.abrupt("return",k.sent);case 5:case"end":return k.stop()}},x)}));return function(x){return B.apply(this,arguments)}}()})]}),(0,n.jsx)(Ce.Z,{span:8,children:(0,n.jsx)(J.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:me.filter(function(B){return B.enable}).length===0?(0,n.jsx)(o.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u540E\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(P.Z,{children:me.map(function(B,x){return B.enable?(0,n.jsxs)(P.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(ae.Z,{count:x+1,style:{backgroundColor:"#a6d3ff"}},x)," ","\u540D\u79F0:"," ",B.type===0?(0,n.jsx)("a",{children:B.name},B.name):B.name]},x),Nt(B)]},x):null})})})})]})},"6")]})})]})},ke=(0,ue.connect)(function(O){var i=O.testcase,m=O.gconfig,V=O.loading;return{testcase:i,gconfig:m,loading:V}})(tt)},88496:function(Dt,Be,e){e.d(Be,{Z:function(){return n}});var xe=e(15009),u=e.n(xe),ie=e(99289),j=e.n(ie),I=e(94171),G=e(58131),Ee=e(4393),s=e(71577),K=e(71230),p=e(15746),R={caseTitle:"caseTitle___B4Pl6"},E=e(76081),A=e(20659),g=e(67294),o=e(60219),Ue=e(74842),L=e(44046),J=e(85893),ue=G.Z.Item,a=function(M){var st=M.dispatch,C=M.form,He=M.testcase,t=M.loading,Ce=M.caseId,Se=M.body,D=M.setBody,Te=M.headers,pe=M.setHeaders,We=M.formData,ge=M.setFormData,c=M.bodyType,y=M.setBodyType,oe=M.setSuffix,r=M.onSubmit,de=M.create,je=de===void 0?!1:de,be=He.caseInfo;return(0,g.useEffect)(function(){C.resetFields(),C.setFieldsValue(be),D(be.body)},[be]),(0,J.jsx)(G.Z,{form:C,name:"addCase",initialValues:be,children:(0,J.jsxs)(Ee.Z,{title:(0,J.jsx)("span",{className:R.caseTitle,children:"\u573A\u666F\u4FE1\u606F"}),extra:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(s.ZP,{type:"primary",onClick:j()(u()().mark(function le(){return u()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,r(je);case 2:case"end":return Ae.stop()}},le)})),children:[(0,J.jsx)(o.Z,{})," \u63D0\u4EA4"]}),je?(0,J.jsxs)(s.ZP,{style:{marginLeft:8},children:[(0,J.jsx)(Ue.Z,{})," \u6D4B\u8BD5"]}):(0,J.jsxs)(s.ZP,{style:{marginLeft:8},onClick:function(){st({type:"testcase/save",payload:{editing:!1}})},children:[(0,J.jsx)(o.Z,{})," \u53D6\u6D88"]})]}),children:[(0,J.jsx)(K.Z,{gutter:[8,8],children:A.Z.CaseDetail.map(function(le){return(0,J.jsx)(p.Z,{span:le.span||24,children:(0,J.jsx)(ue,{label:le.label,colon:le.colon||!0,labelCol:{span:8},wrapperCol:{span:16},rules:[{required:le.required,message:le.message}],name:le.name,valuePropName:le.valuePropName||"value",children:(0,E.Z)(le.type,le.placeholder,le.component)})})})}),(0,J.jsx)(K.Z,{style:{marginTop:8},children:(0,J.jsx)(p.Z,{span:24,children:(0,J.jsx)(L.Z,{case_id:Ce,body:Se,bodyType:c,setBody:D,headers:Te,setHeaders:pe,form:C,createMode:je,formData:We,setFormData:ge,setSuffix:oe,setBodyType:y})})})]})})},n=(0,I.connect)(function(Y){var M=Y.user,st=Y.testcase,C=Y.loading;return{testcase:st,user:M,loading:C}})(a)},87023:function(Dt,Be,e){e.d(Be,{Z:function(){return We}});var xe=e(15009),u=e.n(xe),ie=e(99289),j=e.n(ie),I=e(5574),G=e.n(I),Ee=e(93980),s=e(53575),K=e(85265),p=e(71230),R=e(27511),E=e(64240),A=e(67294),g=e(42481),o=e(26671),Ue=e(9783),L=e.n(Ue),J=e(70366),ue=e.n(J),a=e(85893),n=60,Y={nameFontSize:12,childCountWidth:22,countMarginLeft:0,itemPadding:16,nameMarginLeft:4,rootPadding:18},M=function(ge){var c=ge.data,y=ge.graph,oe=ge.setGraph,r=ge.container_id,de=r===void 0?"container":r;return(0,A.useEffect)(function(){if(c!==null){ue().registerNode("treeNode",{draw:function(T,_){var $e=T.id,Ye=T.label,Pe=T.collapsed,_e=T.selected,qe=T.children,we=T.depth,ze=we===0,yt=qe&&qe.length!==0,rt=Y.childCountWidth,vt=Y.countMarginLeft,Et=Y.itemPadding,Zt=Y.selectedIconWidth,Bt=Y.nameMarginLeft,it=Y.rootPadding,et=0,xt=28,b=0,N=-xt/2,S=_.addShape("text",{attrs:{text:Ye,x:b*2,y:N,textAlign:"left",textBaseline:"top",fontFamily:"PingFangSC-Regular"},cursor:"pointer",name:"name-text-shape"}),ee=S.getBBox().width;et=ee+Et+Bt,et=et<n?n:et,!ze&&yt&&(et+=vt,et+=rt);var w={x:b,y:N,width:et,height:xt,radius:4};ze&&_e&&(w.fill="#e8f7ff",w.stroke="#e8f7ff");var ct=_.addShape("rect",{attrs:w,name:"root-key-shape-rect-shape"});ze||_.addShape("path",{attrs:{path:[["M",b-1,0],["L",et,0]],stroke:"#AAB7C4",lineWidth:1},name:"node-path-shape"});var ce=b-10,Ft=-xt+15;ze&&_.addShape("rect",{attrs:{x:ce,y:Ft,width:et+12,height:xt,radius:14,fill:"#e8f7ff",cursor:"pointer"},name:"main-shape"});var Ke="rgba(0, 0, 0, .65)";if(_e&&(Ke="#40A8FF"),ze?_.addShape("text",{attrs:{text:Ye,x:ce+it,y:1,textAlign:"left",textBaseline:"middle",fill:Ke,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"root-text-shape"}):_.addShape("text",{attrs:{text:Ye,x:_e?ce+6+Bt:ce+6,y:N-5,textAlign:"start",textBaseline:"top",fill:Ke,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"not-root-text-shape"}),yt&&!ze){var Oe=12,F=et-rt,l=-Oe/2;_.addShape("rect",{attrs:{width:rt,height:12,stroke:Pe?"#1890ff":"#5CDBD3",fill:Pe?"#fff":"#E6FFFB",x:F,y:l,radius:6,cursor:"pointer"},name:"child-count-rect-shape"}),_.addShape("text",{attrs:{text:"".concat(qe==null?void 0:qe.length),fill:"rgba(0, 0, 0, .65)",x:F+rt/2,y:l+12,fontSize:10,width:rt,textAlign:"center",cursor:"pointer"},name:"child-count-text-shape"})}return ct}}),ue().registerEdge("smooth",{draw:function(T,_){var $e=T.startPoint,Ye=T.endPoint,Pe=Math.abs(Ye.x-$e.x),_e=[["M",$e.x,$e.y],["C",$e.x+Pe/4,$e.y,Ye.x-Pe/2,Ye.y,Ye.x,Ye.y]],qe=_.addShape("path",{attrs:{stroke:"#AAB7C4",path:_e},name:"smooth-path-shape"});return qe}});var je=document.getElementById(de),be=je.scrollWidth,le=je.scrollHeight||400;if(y==null){var ft=new(ue()).TreeGraph({container:de,width:be,height:le,modes:{default:[{type:"collapse-expand"},"drag-canvas","zoom-canvas"]},defaultNode:{type:"treeNode",anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"smooth"},layout:{type:"compactBox",direction:"LR",getId:function(T){return T.id},getHeight:function(){return 16},getWidth:function(T){var _=ue().Util.getTextSize(T.label,Y.nameFontSize)[0],$e=Y.itemPadding+Y.nameMarginLeft+_+Y.rootPadding+Y.childCountWidth;return $e},getVGap:function(){return 15},getHGap:function(){return 30}}});oe(L()({},de,ft)),ft.data(c),ft.render(),ft.fitView()}else y.changeData(c),y.render(),y.fitView();typeof window!="undefined"&&(window.onresize=function(){!y||y.get("destroyed")||!je||!je.scrollWidth||!je.scrollHeight||y.changeSize(je.scrollWidth,je.scrollHeight)})}},[c]),(0,a.jsx)("div",{})},st=e(4713),C=e(10981),He=e(22763),t=e(37594),Ce=e(26194),Se=e(24315),D=Ee.Z.TabPane,Te={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},pe=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],We=function(ge){var c=ge.response,y=ge.caseName,oe=ge.width,r=ge.modal,de=ge.setModal,je=ge.single,be=je===void 0?!0:je,le=(0,A.useState)(null),ft=G()(le,2),Ae=ft[0],T=ft[1],_=(0,A.useState)([]),$e=G()(_,2),Ye=$e[0],Pe=$e[1],_e=(0,A.useState)({}),qe=G()(_e,2),we=qe[0],ze=qe[1],yt=(0,A.useState)(null),rt=G()(yt,2),vt=rt[0],Et=rt[1],Zt=function(){var b=j()(u()().mark(function N(){var S,ee,w,ct,ce=arguments;return u()().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return S=ce.length>0&&ce[0]!==void 0?ce[0]:c.case_id,ee=ce.length>1&&ce[1]!==void 0?ce[1]:!0,Ke.next=4,(0,st.T4)({case_id:S});case 4:w=Ke.sent,C.Z.response(w)&&(ee?T(w.data):(ct=Object.keys(c).map(function(Oe){return w.data}),Pe(ct)));case 6:case"end":return Ke.stop()}},N)}));return function(){return b.apply(this,arguments)}}(),Bt=function(){var b=j()(u()().mark(function N(){var S,ee,w;return u()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!be){ce.next=6;break}if(c.case_id===void 0){ce.next=4;break}return ce.next=4,Zt();case 4:ce.next=16;break;case 6:S=0,ee=Object.keys(c);case 7:if(!(S<ee.length)){ce.next=16;break}if(w=ee[S],c[w].case_id===void 0){ce.next=12;break}return ce.next=12,Zt(c[w].case_id,!1);case 12:return ce.abrupt("return");case 13:S++,ce.next=7;break;case 16:case"end":return ce.stop()}},N)}));return function(){return b.apply(this,arguments)}}();(0,A.useEffect)(function(){Bt()},[c]);var it=function(N){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c;if(S[N]===null||S[N]===void 0||S[N]==="{}")return[];var ee=JSON.parse(S[N]);return Object.keys(ee).map(function(w){return{key:w,value:ee[w]}})},et=[{title:"\u65AD\u8A00\u4FE1\u606F",key:"msg",dataIndex:"msg"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(N){return(0,a.jsx)(s.Z,{status:N?"success":"error",text:N?"\u901A\u8FC7":"\u672A\u901A\u8FC7"})}}],xt=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c;if(N.asserts===void 0||!N.asserts)return[];var S=JSON.parse(N.asserts),ee=[];return Object.keys(S).forEach(function(w){typeof S[w].msg=="string"?ee.push({status:S[w].status,msg:S[w].msg}):S[w].msg.forEach(function(ct){ee.push({status:S[w].status,msg:ct})})}),ee};return(0,a.jsx)(K.Z,{title:(0,a.jsxs)("span",{children:["[",(0,a.jsx)("strong",{children:y}),"] \u6267\u884C\u8BE6\u60C5"]}),width:oe||1e3,open:r,placement:"right",onClose:function(){return de(!1)},children:(0,a.jsx)(p.Z,{gutter:[8,8],children:be?(0,a.jsxs)(Ee.Z,{style:{width:"100%",minHeight:460},tabPosition:"left",children:[(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(R.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(R.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:c.status?"success":"error",text:c.status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:c.request_method}),(0,a.jsx)(R.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Te[c.status_code]?Te[c.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[c.status_code," ",Te[c.status_code]?Te[c.status_code].text:""]})}),(0,a.jsx)(R.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:c.cost})})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:c.url}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:c.request_data?(0,a.jsx)(g.Z,{language:"json",style:o.BV,children:c.request_data}):(0,a.jsx)(He.Z,{height:120})})]})},"1"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(E.Z,{columns:et,dataSource:xt(),size:"small",pagination:!1})},"3"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(Se.Z,{language:"html",setEditor:Et,readOnly:!0,value:c.logs,height:"80vh"})},"2"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(E.Z,{columns:pe,dataSource:it("request_headers"),size:"small",pagination:!1})},"5"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(E.Z,{columns:pe,dataSource:it("cookies"),size:"small",pagination:!1})},"6"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(E.Z,{columns:pe,dataSource:it("response_headers"),size:"small",pagination:!1})},"7"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(Ce.Z,{readOnly:!0,setEditor:Et,value:c.response?c.response:"",height:"80vh"})},"4"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container",children:(0,a.jsx)(M,{data:Ae,graph:we.container,setGraph:ze})})},"8")]}):(0,a.jsx)(Ee.Z,{style:{width:"100%",minHeight:460},children:Object.keys(c).map(function(b,N){var S;return(0,a.jsx)(D,{tab:b,children:(0,a.jsxs)(Ee.Z,{style:{width:"100%"},tabPosition:"left",children:[(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(R.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(R.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:c[b].status?"success":"error",text:c[b].status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:c[b].request_method}),(0,a.jsx)(R.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Te[c[b].status_code]?Te[c[b].status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[c[b].status_code," ",Te[c[b].status_code]?Te[c[b].status_code].text:""]})}),(0,a.jsx)(R.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:c[b].cost})})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:c[b].url}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:c[b].request_data?(0,a.jsx)(g.Z,{language:"json",style:o.BV,children:c[b].request_data}):(0,a.jsx)(He.Z,{height:120})})]})},"1"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(E.Z,{columns:et,dataSource:xt(c[b]),size:"small",pagination:!1})},"3"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(Se.Z,{language:"html",setEditor:Et,readOnly:!0,value:(S=c[b])===null||S===void 0?void 0:S.logs,height:"80vh"})},"2"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(E.Z,{columns:pe,dataSource:it("request_headers",c[b]),size:"small",pagination:!1})},"5"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(E.Z,{columns:pe,dataSource:it("cookies",c[b]),size:"small",pagination:!1})},"6"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(E.Z,{columns:pe,dataSource:it("response_headers",c[b]),size:"small",pagination:!1})},"7"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(Ce.Z,{setEditor:Et,readOnly:!0,value:c[b].response?c[b].response:"",height:"80vh"})},"4"),(0,a.jsx)(D,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container_".concat(N),children:(0,a.jsx)(M,{data:Ye[N],graph:we["container_".concat(N)],setGraph:ze,container_id:"container_".concat(N)})})},"8")]})},N.toString())})})})})}},72729:function(){}}]);
